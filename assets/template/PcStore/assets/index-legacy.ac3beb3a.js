!function(){var e=document.createElement("style");e.innerHTML=".card{border-radius:.2em;background-color:#fff}.header{height:2em;line-height:2em;border-bottom:solid 1px #eee;background-color:#fff;padding:.5em 1em;font-size:1.2em}\n",document.head.appendChild(e),System.register(["./index-legacy.269699c1.js"],(function(e){"use strict";var t,a,l,r,d,i,o,n,s,u,p,c,m,f,y,g;return{setters:[function(e){t=e._,a=e.E,l=e.r,r=e.b,d=e.d,i=e.e,o=e.w,n=e.o,s=e.h,u=e.j,p=e.t,c=e.i,m=e.f,f=e.F,y=e.g,g=e.k}],execute:function(){const h={data:()=>({DataList:[],type:"1",name:"",page:1,limit:8,Tracking:"",count:1,loading:!1,title:"订单详情",state:!1,OrderData:[],loading2:{},state2:!1,Form:{},FormArr:{},state3:!1,TokenArr:[],SearchMode:!0}),watch:{type(e,t){this.type===e&&(this.page=1,this.count=0,this.DataListGet())},name(e,t){this.name===e&&(this.page=1,this.count=0,this.DataListGet())},page(e){this.DataListGet()}},created(){this.DataListGet()},methods:{SearchModeSet(e=!0){this.name="",this.page=1,this.count=0,this.SearchMode=e,this.DataListGet()},queue(){this.$ajax.post("main.php?act=SubmitOrder")},Kami(e){this.TokenArr=[];for(let t=0;t<e.length;t++)this.TokenArr[t]=e[t].token;this.state3=!0},copyText(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t),this.$message({message:"复制成功",type:"success"})},Message(e){a.alert(e,"订单处理结果",{confirmButtonText:"OK"})},Open(e){this.$router.push({path:"goods",query:{gid:e}})},OpenUrl(e){window.open(e)},InputArr(){let e=this.OrderData.data.input;if(0===e.length)return!1;let t={},a={};for(const l in e){let r=e[l].split("：");a[l]={name:r[0],value:r[1]},t[l]=r[1]}this.FormArr=a,this.Form=t,this.state2=!0},Take(e){let t=this;this.$ajax.post("main.php?act=OrderList&type=QueryTake",{id:e}).then((function(e){t.show2=!1,e.code>=0?(t.$message({message:e.msg,type:"success"}),t.DataListGet()):t.$message({message:e.msg,type:"error"})}))},OrderModification(){let e=this,t={oid:e.OrderData.data.id,order:e.OrderData.data.order,data:[]};for(const a in e.Form){if(""==e.Form[a])return e.$message({message:"请将第"+(a-0+1)+"行输入框填写完整！",type:"error"}),!1;t.data[a]=e.Form[a]}this.$ajax.get("main.php?act=OrderList&type=OrderModification",t).then((function(t){e.state2=!1,1===t.code?(e.$message({message:t.msg,type:"success"}),e.OrderDataGet(e.OrderData.data.id,e.OrderData.data.order,2),e.DataListGet()):e.$message({message:t.msg,type:"error"})}))},DataListGet(){this.queue();let e=this;this.loading=!0,this.$ajax.post("main.php?act=OrderList&type="+(this.SearchMode?"OrderAll":"QueryList"),{state:this.type,page:this.page,seek:this.name,msg:this.name,limit:this.limit}).then((function(t){if(e.loading=!1,t.code>=0){e.DataList=t.data,e.loading2={};for(let a=0;a<t.data.length;a++)e.loading2[t.data[a].id]=!1;e.Tracking=t.Tracking,e.count=t.count}else-2==t.code?(e.DataList=[],e.loading2={},e.count=0,e.$message({message:t.msg,type:"error"})):e.$message({message:t.msg,type:"error"})}))},OrderDataGet(e,t,a=1){let l=this;this.loading2[e]=!0,this.$ajax.post("main.php?act=OrderList&type=QueryDetails",{id:e,order:t}).then((function(r){l.loading2[e]=!1,r.code>=0&&(l.OrderData=r,1===a&&(l.state=!0,l.title="订单"+t+"详情"))}))}}},k={style:{"padding-top":"0.3em"}},_=s("div",{class:"header"},"订单查询",-1),w={class:"card",style:{padding:"1.5em","border-radius":"0.2em","background-color":"#ffffff"}},O={style:{padding:"0.8em"}},D=u("已完成"),b=u("待发货"),x=u("异常中"),v=u("正在处理"),C=u("已退款"),z=u("售后中"),T=u("已评价"),L=u("未知状态"),M=["onClick"],A=u("商品已丢失"),V={style:{"font-size":"110%"}},S={key:0},$={key:0,style:{color:"#ff0000","font-size":"12px"}},U={key:1},j={style:{color:"red","margin-right":"0.5rem","font-size":"12px"}},F={style:{"text-decoration":"line-through",color:"#8f9298","font-size":"12px"}},G={key:1,style:{color:"darkorange","font-size":"12px"}},H={style:{"font-size":"12px","margin-left":"0.1rem"}},E={key:2,style:{color:"#07C160","font-size":"12px"}},q={key:3},I={key:0,style:{color:"#ff0000","font-size":"12px"}},K={key:1},Q={style:{color:"#ff0000","margin-right":"0.5rem","font-size":"12px"}},B={style:{"font-size":"12px","text-decoration":"line-through",color:"#8f9298"}},N={style:{"text-align":"center"}},P=u(" 详情 "),J=u("卡密 "),R=u("处理结果 "),W=u("收货"),X=u("售后"),Y={style:{"text-align":"center","margin-top":"1em"}},Z={style:{padding:"1em"}},ee=u(" 订单状态 "),te=u(" 初始数量 "),ae=u(" 下单数量 "),le=u(" 当前数量 "),re=u(" 提交时间 "),de=u(" 备注信息 "),ie=u(" 收货信息修改 "),oe=u("主机后台 "),ne=u(" 发起工单 "),se=u(" 订单编号 "),ue=u(" 商品名称 "),pe={style:{"word-wrap":"break-word","word-break":"break-all"}},ce=u(" 订单状态 "),me=u("已完成"),fe=u("待发货"),ye=u("异常中"),ge=u("正在处理"),he=u("已退款"),ke=u("售后中"),_e=u("已评价"),we=u("未知状态"),Oe=u(" 购买份数 "),De=u(" 每份数量 "),be=u(" 付款方式 "),xe=u(" 实付金额 "),ve=u(" 优惠金额 "),Ce=u(" 订单原价 "),ze=u(" 优惠券ID "),Te=u(" 处理时间 "),Le=u(" 创建时间 "),Me=["innerHTML"],Ae=["innerHTML"],Ve=["innerHTML"],Se={class:"dialog-footer"},$e=u("关闭"),Ue=u("复制全部"),je={class:"dialog-footer"},Fe=u("取消"),Ge=u("保存");e("default",t(h,[["render",function(e,t,a,h,He,Ee){const qe=l("el-option"),Ie=l("el-select"),Ke=l("el-form-item"),Qe=l("el-input"),Be=l("el-button"),Ne=l("el-form"),Pe=l("el-tag"),Je=l("el-table-column"),Re=l("n-ellipsis"),We=l("el-popconfirm"),Xe=l("el-table"),Ye=l("n-pagination"),Ze=l("el-col"),et=l("el-row"),tt=l("el-descriptions-item"),at=l("el-descriptions"),lt=l("n-alert"),rt=l("el-scrollbar"),dt=l("el-drawer"),it=l("el-dialog"),ot=r("loading");return n(),d("div",k,[i(et,{gutter:20},{default:o((()=>[i(Ze,{span:24},{default:o((()=>[_,s("div",w,[s("div",O,[i(Ne,{inline:!0,class:"demo-form-inline"},{default:o((()=>[i(Ke,{label:"订单状态"},{default:o((()=>[i(Ie,{modelValue:He.type,"onUpdate:modelValue":t[0]||(t[0]=e=>He.type=e),size:"medium",placeholder:"订单状态"},{default:o((()=>[i(qe,{label:"全部",value:"1"}),i(qe,{label:"未完成",value:"2"}),i(qe,{label:"待收货",value:"3"}),i(qe,{label:"已收货",value:"4"}),i(qe,{label:"已取消",value:"5"})])),_:1},8,["modelValue"])])),_:1}),i(Ke,{label:"下单信息"},{default:o((()=>[i(Qe,{modelValue:He.name,"onUpdate:modelValue":t[1]||(t[1]=e=>He.name=e),size:"medium",placeholder:"请输入下单信息"},null,8,["modelValue"])])),_:1}),i(Ke,null,{default:o((()=>[i(Be,{text:"",bg:"",type:He.SearchMode?"danger":"success",onClick:t[2]||(t[2]=e=>Ee.SearchModeSet(!He.SearchMode))},{default:o((()=>[u(p(He.SearchMode?"点击查询游客订单":"点击查询绑定订单"),1)])),_:1},8,["type"])])),_:1})])),_:1})]),c((n(),m(Xe,{data:He.DataList,style:{width:"100%"}},{default:o((()=>[i(Je,{fixed:"",width:"100",label:"订单状态"},{default:o((e=>[1==e.row.state?(n(),m(Pe,{key:0,type:"success"},{default:o((()=>[D])),_:1})):2==e.row.state?(n(),m(Pe,{key:1},{default:o((()=>[b])),_:1})):3==e.row.state?(n(),m(Pe,{key:2,type:"danger"},{default:o((()=>[x])),_:1})):4==e.row.state?(n(),m(Pe,{key:3,type:"warning"},{default:o((()=>[v])),_:1})):5==e.row.state?(n(),m(Pe,{key:4,type:"info"},{default:o((()=>[C])),_:1})):6==e.row.state?(n(),m(Pe,{key:5,type:"danger"},{default:o((()=>[z])),_:1})):7==e.row.state?(n(),m(Pe,{key:6,type:"success"},{default:o((()=>[T])),_:1})):(n(),m(Pe,{key:7,type:"info"},{default:o((()=>[L])),_:1}))])),_:1}),i(Je,{width:"150",label:"下单参数"},{default:o((e=>[(n(!0),d(f,null,y(e.row.input,((t,a)=>(n(),d("div",{style:{color:"#55557f","font-size":"12px"},key:a},p(null==e.row.value[a]?"输入框"+(a-0+1):e.row.value[a])+"："+p(t),1)))),128))])),_:1}),i(Je,{width:"150",label:"商品名称"},{default:o((e=>[e.row.name?(n(),m(Re,{key:0,style:{"max-width":"150px",color:"#5555ff"}},{default:o((()=>[s("span",{style:{cursor:"pointer","font-size":"12px"},onClick:t=>Ee.Open(e.row.gid)},p(e.row.name),9,M)])),_:2},1024)):(n(),m(Re,{key:1,style:{"max-width":"150px",color:"red","font-size":"12px"}},{default:o((()=>[A])),_:1}))])),_:1}),i(Je,{label:"订单金额",width:"150"},{default:o((e=>[s("div",V,["余额付款"==e.row.payment?(n(),d("span",S,[-1==e.row.coupon?(n(),d("span",$,"￥"+p(e.row.price),1)):(n(),d("span",U,[s("span",j,"￥"+p(e.row.price),1),s("span",F,p(e.row.originalprice)+"元",1)]))])):"积分兑换"==e.row.payment?(n(),d("span",G,[u(p(e.row.price)+" ",1),s("span",H,p(e.row.currency),1)])):"免费领取"==e.row.payment?(n(),d("span",E,"免费商品")):(n(),d("span",q,[-1==e.row.coupon?(n(),d("span",I,"￥"+p(e.row.price),1)):(n(),d("span",K,[s("span",Q,"￥"+p(e.row.price),1),s("span",B,p(e.row.originalprice)+"元",1)]))]))])])),_:1}),i(Je,{label:"发货数",width:"100"},{default:o((e=>[i(Pe,{type:"info",size:"small"},{default:o((()=>[u(p(e.row.quantity*e.row.num)+p(e.row.units),1)])),_:2},1024)])),_:1}),i(Je,{label:"下单时间",width:"200",prop:"addtime"}),i(Je,{fixed:"right",label:"操作",width:"220"},{default:o((e=>[s("div",N,[i(Be,{size:"small",onClick:t=>Ee.OrderDataGet(e.row.id,e.row.order),type:"primary",loading:He.loading2[e.row.id],plain:""},{default:o((()=>[P])),_:2},1032,["onClick","loading"]),e.row.Token.length>=1?(n(),m(Be,{key:0,size:"small",onClick:t=>Ee.Kami(e.row.Token),plain:"",type:"danger"},{default:o((()=>[J])),_:2},1032,["onClick"])):g("",!0),-1!=e.row.remark?(n(),m(Be,{key:1,size:"small",onClick:t=>Ee.Message(e.row.remark),type:"warning",plain:""},{default:o((()=>[R])),_:2},1032,["onClick"])):g("",!0),-1!=e.row.logistics?(n(),m(Be,{key:2,onClick:t=>Ee.OpenUrl(He.Tracking+e.row.logistics.order),size:"small",type:"success",plain:""},{default:o((()=>[u(p(e.row.logistics.name),1)])),_:2},1032,["onClick"])):g("",!0),1==e.row.take&&1==e.row.state?(n(),m(We,{key:3,title:"确认收货吗?",onConfirm:t=>Ee.Take(e.row.id)},{reference:o((()=>[i(Be,{size:"small",plain:"",type:"success"},{default:o((()=>[W])),_:1})])),_:2},1032,["onConfirm"])):g("",!0),1==e.row.take&&1!=e.row.state&&5!=e.row.state&&7!=e.row.state?(n(),m(We,{key:4,title:"确认要发起售后工单吗?",onConfirm:t=>Ee.OpenUrl("./user/tickets_new.php?id="+e.row.id)},{reference:o((()=>[i(Be,{size:"small",plain:"",type:"danger"},{default:o((()=>[X])),_:1})])),_:2},1032,["onConfirm"])):g("",!0)])])),_:1})])),_:1},8,["data"])),[[ot,He.loading]]),s("div",Y,[i(Ye,{style:{"margin-top":"1em"},background:"","hide-on-single-page":"",small:"",layout:"total, prev, pager, next, jumper","page-size":He.limit,"item-count":He.count,page:He.page,"onUpdate:page":t[3]||(t[3]=e=>He.page=e)},null,8,["page-size","item-count","page"])])])])),_:1})])),_:1}),i(dt,{withHeader:!1,size:"50%",modelValue:He.state,"onUpdate:modelValue":t[10]||(t[10]=e=>He.state=e),direction:"rtl"},{default:o((()=>[s("div",Z,[i(rt,{height:"92vh"},{default:o((()=>[1==He.OrderData.data.ApiSn?(n(),m(at,{key:0,style:{"margin-bottom":"1em"},class:"margin-top",title:"订单完成进度[实时]",column:1,border:""},{default:o((()=>[i(tt,null,{label:o((()=>[ee])),default:o((()=>[u(" "+p(He.OrderData.data.ApiState),1)])),_:1}),i(tt,null,{label:o((()=>[te])),default:o((()=>[u(" "+p(He.OrderData.data.ApiInitial),1)])),_:1}),i(tt,null,{label:o((()=>[ae])),default:o((()=>[u(" "+p(He.OrderData.data.ApiNum),1)])),_:1}),i(tt,null,{label:o((()=>[le])),default:o((()=>[u(" "+p(He.OrderData.data.ApiPresent),1)])),_:1}),i(tt,null,{label:o((()=>[re])),default:o((()=>[u(" "+p(He.OrderData.data.ApiTime),1)])),_:1}),"无"!=He.OrderData.data.ApiError?(n(),m(tt,{key:0},{label:o((()=>[de])),default:o((()=>[s("span",null,p(He.OrderData.data.ApiError),1)])),_:1})):g("",!0)])),_:1})):g("",!0),i(at,{title:He.title,column:1,border:""},{extra:o((()=>[2!=He.OrderData.data.stateid&&3!=He.OrderData.data.stateid||1!=He.OrderData.OrderModification?g("",!0):(n(),m(Be,{key:0,onClick:t[4]||(t[4]=e=>Ee.InputArr()),type:"primary",size:"small"},{default:o((()=>[ie])),_:1})),1==He.OrderData.data.HostType?(n(),m(Be,{key:1,onClick:t[5]||(t[5]=e=>Ee.OpenUrl("./HostAdmin")),type:"warning",size:"small"},{default:o((()=>[oe])),_:1})):g("",!0),i(Be,{onClick:t[6]||(t[6]=e=>Ee.OpenUrl("./user/tickets_new.php?id="+He.OrderData.data.id)),type:"danger",size:"small"},{default:o((()=>[ne])),_:1})])),default:o((()=>[i(tt,null,{label:o((()=>[se])),default:o((()=>[s("span",{onClick:t[7]||(t[7]=e=>Ee.copyText(He.OrderData.data.order))},p(He.OrderData.data.order),1)])),_:1}),i(tt,null,{label:o((()=>[ue])),default:o((()=>[s("div",pe,p(He.OrderData.data.name),1)])),_:1}),i(tt,null,{label:o((()=>[ce])),default:o((()=>[s("div",null,[1==He.OrderData.data.stateid?(n(),m(Pe,{key:0,type:"success"},{default:o((()=>[me])),_:1})):2==He.OrderData.data.stateid?(n(),m(Pe,{key:1},{default:o((()=>[fe])),_:1})):3==He.OrderData.data.stateid?(n(),m(Pe,{key:2,type:"danger"},{default:o((()=>[ye])),_:1})):4==He.OrderData.data.stateid?(n(),m(Pe,{key:3,type:"warning"},{default:o((()=>[ge])),_:1})):5==He.OrderData.data.stateid?(n(),m(Pe,{key:4,type:"info"},{default:o((()=>[he])),_:1})):6==He.OrderData.data.stateid?(n(),m(Pe,{key:5,type:"danger"},{default:o((()=>[ke])),_:1})):7==He.OrderData.data.stateid?(n(),m(Pe,{key:6,type:"success"},{default:o((()=>[_e])),_:1})):(n(),m(Pe,{key:7,type:"info"},{default:o((()=>[we])),_:1}))])])),_:1}),i(tt,null,{label:o((()=>[Oe])),default:o((()=>[u(" "+p(He.OrderData.data.num)+"份 ",1)])),_:1}),i(tt,null,{label:o((()=>[De])),default:o((()=>[u(" "+p(He.OrderData.data.quantity)+p(He.OrderData.data.units),1)])),_:1}),i(tt,null,{label:o((()=>[be])),default:o((()=>[u(" "+p(He.OrderData.data.type),1)])),_:1}),i(tt,null,{label:o((()=>[xe])),default:o((()=>[u(" "+p(0==He.OrderData.data.price?"0元":He.OrderData.data.price+"元"),1)])),_:1}),-1!=He.OrderData.data.coupon?(n(),m(tt,{key:0},{label:o((()=>[ve])),default:o((()=>[u(" "+p(He.OrderData.data.discounts+"元"),1)])),_:1})):g("",!0),-1!=He.OrderData.data.coupon?(n(),m(tt,{key:1},{label:o((()=>[Ce])),default:o((()=>[u(" "+p(He.OrderData.data.originalprice)+"元 ",1)])),_:1})):g("",!0),-1!=He.OrderData.data.coupon?(n(),m(tt,{key:2},{label:o((()=>[ze])),default:o((()=>[u(" "+p(He.OrderData.data.coupon+"号"),1)])),_:1})):g("",!0),i(tt,null,{label:o((()=>[Te])),default:o((()=>{var e;return[u(" "+p(null!==(e=He.OrderData.data.endtime)&&void 0!==e?e:"未完成"),1)]})),_:1}),i(tt,null,{label:o((()=>[Le])),default:o((()=>[u(" "+p(He.OrderData.data.addtiem),1)])),_:1})])),_:1},8,["title"]),-1!=He.OrderData.data.token_arr?(n(),m(at,{key:1,style:{"margin-top":"1em"},onClick:t[8]||(t[8]=e=>Ee.copyText(He.OrderData.data.token_arr.join("\n\t"))),title:"卡密信息",column:1,border:""},{default:o((()=>[(n(!0),d(f,null,y(He.OrderData.data.token_arr,((e,t)=>(n(),m(tt,{key:t},{label:o((()=>[u(p("卡"+(t+1)),1)])),default:o((()=>[u(" "+p(e),1)])),_:2},1024)))),128))])),_:1})):g("",!0),i(at,{onClick:t[9]||(t[9]=e=>Ee.copyText(He.OrderData.data.input.join("\n\t"))),style:{"margin-top":"1em"},title:"收货信息",column:2,border:""},{default:o((()=>[(n(!0),d(f,null,y(He.OrderData.data.input,((e,t)=>(n(),m(tt,{key:t},{label:o((()=>[u(p(e.split("：")[0]),1)])),default:o((()=>[u(" "+p(e.split("：")[1]),1)])),_:2},1024)))),128))])),_:1}),Object.keys(He.OrderData.data.Expansion).length>=1?(n(),m(at,{key:2,style:{"margin-top":"1em"},title:"更多信息",column:1,border:""},{default:o((()=>[(n(!0),d(f,null,y(He.OrderData.data.Expansion,((e,t)=>(n(),m(tt,{key:t},{label:o((()=>[u(p(t),1)])),default:o((()=>[s("div",{innerHTML:e},null,8,Me)])),_:2},1024)))),128))])),_:1})):g("",!0),-1!=He.OrderData.data.Explain?(n(),m(lt,{key:3,"show-icon":!1,title:"发货信息",type:"info",style:{"margin-top":"1em"}},{default:o((()=>[s("div",{innerHTML:He.OrderData.data.Explain},null,8,Ae)])),_:1})):g("",!0),i(lt,{title:"商品说明","show-icon":!1,style:{"margin-top":"1em"}},{default:o((()=>[s("div",{innerHTML:He.OrderData.data.docs},null,8,Ve)])),_:1})])),_:1})])])),_:1},8,["modelValue"]),i(it,{modelValue:He.state3,"onUpdate:modelValue":t[13]||(t[13]=e=>He.state3=e),title:"卡密信息",width:"400px"},{footer:o((()=>[s("span",Se,[i(Be,{onClick:t[11]||(t[11]=e=>He.state3=!1)},{default:o((()=>[$e])),_:1}),i(Be,{type:"primary",onClick:t[12]||(t[12]=e=>Ee.copyText(He.TokenArr.join("\n\t")))},{default:o((()=>[Ue])),_:1})])])),default:o((()=>[i(at,{column:1,border:""},{default:o((()=>[(n(!0),d(f,null,y(He.TokenArr,((e,t)=>(n(),m(tt,{key:t},{label:o((()=>[u(p("卡"+(t+1)),1)])),default:o((()=>[u(" "+p(e),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"]),i(it,{modelValue:He.state2,"onUpdate:modelValue":t[16]||(t[16]=e=>He.state2=e),title:"修改收货信息",width:"400px"},{footer:o((()=>[s("span",je,[i(Be,{onClick:t[14]||(t[14]=e=>He.state2=!1)},{default:o((()=>[Fe])),_:1}),i(Be,{type:"primary",onClick:t[15]||(t[15]=e=>Ee.OrderModification())},{default:o((()=>[Ge])),_:1})])])),default:o((()=>[i(Ne,{ref:"form",model:He.Form},{default:o((()=>[(n(!0),d(f,null,y(He.FormArr,((e,t)=>(n(),m(Ke,{key:t,label:e.name},{default:o((()=>[i(Qe,{modelValue:He.Form[t],"onUpdate:modelValue":e=>He.Form[t]=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])))),128))])),_:1},8,["model"])])),_:1},8,["modelValue"])])}]]))}}}))}();
