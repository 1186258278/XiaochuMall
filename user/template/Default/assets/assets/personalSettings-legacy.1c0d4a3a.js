System.register(["./index-legacy.6abde332.js","./qq-legacy.970b1c9f.js"],(function(e){"use strict";var a,t,l,n,o,s,d,u,i,r,p,m,c,g,h,f,y;return{setters:[function(e){a=e._,t=e.E,l=e.C,n=e.r,o=e.c,s=e.f,d=e.d,u=e.a,i=e.w,r=e.b,p=e.F,m=e.o,c=e.j,g=e.e,h=e.t,f=e.q},function(e){y=e._}],execute:function(){const V={name:"personalSettings",data:()=>({activeName:1,Data:!1,current:0,password:"",IP:[],Type:!1,PassType:!0,ID:"",Token:"",Url:"",TagType:!1,inputValue:""}),mounted(){this.AjaxGet()},methods:{handleClose(e){1!==this.IP.length?(this.IP.splice(this.IP.indexOf(e),1),this.TagAjax()):this.$message({message:"至少留一个IP！",type:"error",grouping:!0})},handleInputConfirm(){""!==this.inputValue&&this.IP.push(this.inputValue),this.TagType=!1,this.inputValue="",this.TagAjax()},TagAjax(){let e=this;this.$ajax.post("ajax.php?act=ip_data",{ip_data:this.IP}).then((function(a){a.code>=0?e.$message({message:a.msg,type:"success",grouping:!0}):e.$message({message:a.msg,type:"error",grouping:!0})}))},QuickLogin(e="qq"){t.confirm("确定绑定吗，绑定后可以使用"+e+"快捷登录此账号！","温馨提示",{confirmButtonText:"确认绑定",cancelButtonText:"取消",type:"warning"}).then((()=>{"qq"==e&&open("ajax.php?act=connected")}))},Router(e,a={}){this.$router.push({path:e,query:a})},Submit(){var e=this.IP.split("\n");e=e.join("|");let a=this;this.copy(this.Data.token),uni.showModal({title:"温馨提示",content:"确定要更新白名单IP列表吗？",showCancel:!0,confirmText:"确定",success:function(t){t.confirm&&(a.$refs.loading.open(),a.$u.get("?act=UserAjax&uac=ip_data&type=2",{ip_data:e}).then((e=>{a.$refs.loading.close(),e.code>=0&&uni.showModal({title:"恭喜",content:e.msg,showCancel:!1,confirmText:"好的",success:e=>{a.AjaxGet()}})})))}})},Reset(){let e=this;t.confirm("确认要更新对接密钥吗，更新后原来的对接密钥将失效?","温馨提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{e.$ajax.post("ajax.php?act=add_token").then((function(a){a.code>=0?(e.$message({message:a.msg,type:"success",grouping:!0}),e.Token=a.token):e.$message({message:a.msg,type:"error",grouping:!0})}))}))},AjaxSet(){let e={name:this.Data.name,qq:this.Data.qq,mobile:this.Data.mobile,username:this.Data.username,password:this.password};if(this.Data.password&&""===this.password)return void this.$message({message:"请将登录密码填写完整！",type:"error",grouping:!0});let a=this;t.confirm("确定要更新用户数据吗？如果修改了登录账号，则需要重新登陆！","温馨提示",{confirmButtonText:"确认修改",cancelButtonText:"取消",type:"warning"}).then((()=>{a.$ajax.post("ajax.php?act=user_set",e).then((function(e){e.code>=0?(a.$message({message:e.msg,type:"success",grouping:!0}),l.updateGlobalData(),a.GetUserPanelInformation()):a.$message({message:e.msg,type:"error",grouping:!0})}))}))},change(e){this.current=e},AjaxGet(){let e=this;this.Type=!1,this.$ajax.post("ajax.php?act=UserGet").then((a=>{a.code>=0?(e.Data=a.data,e.Data.password?e.PassType=!0:(e.Data.password="",e.PassType=!1),e.IP=a.data.IPList,e.Type=!0,e.ID=a.data.id,e.Token=a.data.token,e.Url=a.data.url):e.Data=!1}))}}},_={style:{"background-color":"#FFFFFF",padding:"1em","margin-bottom":"0.5em"}},b=g("保存信息"),x={style:{padding:"2em"}},D=s("img",{src:y},null,-1),T=g(" ＱＱ快捷登录 "),k=g("立即绑定 "),w=g("更新密钥"),I=s("hr",null,null,-1),j=g(" 添加白名单IP "),P=s("div",{style:{"margin-top":"2em"}},[g(" 系统对接开发文档："),s("a",{href:"https://console-docs.apipost.cn/preview/673b01ecd8a72dd0/10de7a514a9c49cf",target:"_blank"},"查看")],-1);e("default",a(V,[["render",function(e,a,t,l,y,V){const q=n("el-page-header"),U=n("el-input"),$=n("el-form-item"),C=n("el-button"),v=n("el-form"),A=n("el-tab-pane"),B=n("el-col"),F=n("el-row"),G=n("el-tag"),Q=n("el-tabs"),S=n("n-card");return m(),o(p,null,[s("div",_,[d(q,{onBack:a[0]||(a[0]=e=>V.Router("/user/home")),content:"个人设置"})]),!1!==y.Data?(m(),u(S,{key:0,title:"个人信息配置面板"},{default:i((()=>[d(Q,{modelValue:y.activeName,"onUpdate:modelValue":a[14]||(a[14]=e=>y.activeName=e)},{default:i((()=>[d(A,{label:"配置基础信息",name:1},{default:i((()=>[d(v,{model:y.Data,"label-position":"top"},{default:i((()=>[d($,{label:"用户名称"},{default:i((()=>[d(U,{modelValue:y.Data.name,"onUpdate:modelValue":a[1]||(a[1]=e=>y.Data.name=e),placeholder:"请填写用户名称"},null,8,["modelValue"])])),_:1}),d($,{label:"绑定Q Q"},{default:i((()=>[d(U,{modelValue:y.Data.qq,"onUpdate:modelValue":a[2]||(a[2]=e=>y.Data.qq=e),placeholder:"请输入绑定QQ"},null,8,["modelValue"])])),_:1}),d($,{label:"绑定手机"},{default:i((()=>[d(U,{modelValue:y.Data.mobile,"onUpdate:modelValue":a[3]||(a[3]=e=>y.Data.mobile=e),placeholder:"请输入绑定手机"},null,8,["modelValue"])])),_:1}),d($,{label:"登陆账号"},{default:i((()=>[d(U,{modelValue:y.Data.username,"onUpdate:modelValue":a[4]||(a[4]=e=>y.Data.username=e),placeholder:"请输入登录账号"},null,8,["modelValue"])])),_:1}),d($,{label:"登陆密码"},{default:i((()=>[y.PassType?(m(),u(U,{key:1,modelValue:y.Data.password,"onUpdate:modelValue":a[6]||(a[6]=e=>y.Data.password=e),placeholder:"请输入密码,您尚未设置密码,第一次必须输入哦"},null,8,["modelValue"])):(m(),u(U,{key:0,modelValue:y.Data.password,"onUpdate:modelValue":a[5]||(a[5]=e=>y.Data.password=e),placeholder:"留空不修改,请填写新的密码"},null,8,["modelValue"]))])),_:1}),d($,null,{default:i((()=>[d(C,{style:{width:"100%"},type:"primary",onClick:a[7]||(a[7]=e=>V.AjaxSet())},{default:i((()=>[b])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),d(A,{label:"配置快捷登录",name:2},{default:i((()=>[s("div",x,[d(F,{gutter:20},{default:i((()=>[d(B,{span:6,style:{"text-align":"left","margin-bottom":"0.5em"}},{default:i((()=>[d(F,{gutter:0},{default:i((()=>[d(B,{span:6,style:{"text-align":"left"}},{default:i((()=>[D])),_:1}),d(B,{span:18,style:{"text-align":"left","font-size":"1.5em"}},{default:i((()=>[T])),_:1})])),_:1})])),_:1}),d(B,{span:18,style:{"padding-top":"0.3em"}},{default:i((()=>[d(C,{type:"primary",onClick:a[8]||(a[8]=e=>V.QuickLogin("qq")),size:"small"},{default:i((()=>[k])),_:1})])),_:1})])),_:1})])])),_:1}),d(A,{label:"我的对接信息",name:3},{default:i((()=>[d(v,{"label-position":"top"},{default:i((()=>[d($,{label:"社区域名 [被其他站点对接的时候填写]"},{default:i((()=>[d(U,{modelValue:y.Url,"onUpdate:modelValue":a[9]||(a[9]=e=>y.Url=e),disabled:""},null,8,["modelValue"])])),_:1}),d($,{label:"对接ID [被其他站点对接的时候填写]"},{default:i((()=>[d(U,{modelValue:y.ID,"onUpdate:modelValue":a[10]||(a[10]=e=>y.ID=e),disabled:""},null,8,["modelValue"])])),_:1}),d($,{label:"对接密钥 [被其他站点对接的时候填写]"},{default:i((()=>[d(U,{modelValue:y.Token,"onUpdate:modelValue":a[11]||(a[11]=e=>y.Token=e),disabled:""},{prepend:i((()=>[d(C,{onClick:V.Reset},{default:i((()=>[w])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])),_:1})])),_:1}),I,(m(!0),o(p,null,c(y.IP,(e=>(m(),u(G,{key:e,closable:"","disable-transitions":!1,style:{margin:"0.5em 0.5em 0 0"},size:"large",type:"danger",onClose:a=>V.handleClose(e)},{default:i((()=>[g(h(e),1)])),_:2},1032,["onClose"])))),128)),y.TagType?(m(),u(U,{key:0,modelValue:y.inputValue,"onUpdate:modelValue":a[12]||(a[12]=e=>y.inputValue=e),style:{width:"120px",margin:"0.5em 0.5em 0 0"},onKeyup:f(V.handleInputConfirm,["enter"]),onBlur:V.handleInputConfirm,placeholder:"请填写IP地址"},null,8,["modelValue","onKeyup","onBlur"])):(m(),u(C,{key:1,type:"primary",style:{margin:"0 0.5em 0 0"},text:"",bg:"",onClick:a[13]||(a[13]=e=>y.TagType=!0)},{default:i((()=>[j])),_:1})),P])),_:1})])),_:1},8,["modelValue"])])),_:1})):r("",!0)],64)}]]))}}}));
