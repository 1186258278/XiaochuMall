import{_ as j,E as g,r as u,c as r,d as i,w as n,F as x,o as l,f as s,j as M,a as _,t as p,e as d,b as U}from"./index.7e8edd7c.js";const N={name:"couponManage",data(){return{limit:8,name:"",data:{data:{},count:0},type:1,Token:"",show:!1,CouponData:{}}},watch:{type(a,o){this.getListCoupon(1)},name(){this.getListCoupon(1)}},mounted(){this.getListCoupon()},methods:{Conversion(){if(this.Token===""){this.$message({message:"\u8BF7\u5C06\u5238\u7801\u586B\u5199\u5B8C\u6574\uFF01",type:"error",grouping:!0});return}let a=this;g.confirm("\u786E\u5B9A\u8981\u5151\u6362\uFF1A"+this.Token+" \u5417\uFF1F","\u6E29\u99A8\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{a.$ajax.post("ajax.php?act=CouponConversion",{token:a.Token}).then(o=>{o.code>=0?(g.alert(o.msg,"\u606D\u559C",{confirmButtonText:"\u597D\u7684",dangerouslyUseHTMLString:!0}),a.getListCoupon(1)):g.alert(o.msg,"\u8B66\u544A",{confirmButtonText:"\u597D\u7684",dangerouslyUseHTMLString:!0})})})},renderCountdown(a){let o="";return a.hours>24?o=Math.floor(a.hours/24)+"\u5929"+a.hours%24+"\u5C0F\u65F6":o=a.hours+"\u5C0F\u65F6",o+a.minutes+"\u5206"+a.seconds+"\u79D2\u540E\u8FC7\u671F"},getListCoupon(a=1){let o=this;this.$ajax.post("ajax.php?act=CouponList",{page:a,limit:o.limit,name:o.name,type:o.type}).then(function(m){m.code>=0?o.data=m:o.data={data:{},count:0}})},Router(a,o={}){this.$router.push({path:a,query:o})}}},E={style:{"margin-bottom":"1em"}},S=d("\u641C\u7D22\u5238\u7801"),F=d("\u5238\u7801\u5151\u6362"),H=d("\u70B9\u51FB\u5151\u6362"),q={key:0},R={key:0},A={key:1},G={key:2},I={style:{"margin-top":"1em"}},J=d("\u901A\u7528\u5238"),K=d(" \u6EE1\u51CF "),O=d("\u7ACB\u51CF "),P=d("\u6298\u6263"),Q={key:0,style:{"margin-top":"1em",color:"darkgoldenrod","font-size":"0.8em"}},W={key:1,style:{color:"#e5610d"}},X={key:1,style:{"margin-top":"1em",color:"darkgoldenrod","font-size":"0.8em"}},Y={style:{color:"#e5610d"}},Z={key:1},$=s("thead",null,[s("tr",null,[s("th",null,"\u53C2\u6570"),s("th",null,"\u5185\u5BB9")])],-1),ee=s("td",null,"\u5238\u7801",-1),te=s("td",null,"\u9886\u53D6\u65F6\u95F4",-1),oe={key:0},ne=s("td",null,"\u4F7F\u7528\u65F6\u95F4",-1),le=s("td",null,"\u76F8\u5173\u8BF4\u660E",-1);function se(a,o,m,ae,t,y){const f=u("el-input"),c=u("el-button"),h=u("n-card"),k=u("n-tab-pane"),b=u("n-tabs"),v=u("n-ellipsis"),w=u("n-countdown"),T=u("el-col"),V=u("el-row"),z=u("el-empty"),D=u("el-pagination"),L=u("n-table"),B=u("el-dialog");return l(),r(x,null,[i(h,{title:"\u4F18\u60E0\u5238\u64CD\u4F5C",style:{"margin-bottom":"0.5em"}},{default:n(()=>[s("div",E,[i(f,{modelValue:t.name,"onUpdate:modelValue":o[0]||(o[0]=e=>t.name=e),placeholder:"\u8BF7\u8F93\u5165\u4F18\u60E0\u5238\u540D\u79F0,\u8BA2\u5355\u53F7,\u5238\u7801\u7B49\u8FDB\u884C\u641C\u7D22\uFF01"},{prepend:n(()=>[S]),_:1},8,["modelValue"]),i(f,{style:{"margin-top":"1em"},modelValue:t.Token,"onUpdate:modelValue":o[1]||(o[1]=e=>t.Token=e),placeholder:"\u8BF7\u8F93\u5165\u60A8\u83B7\u5F97\u7684\u5238\u7801"},{prepend:n(()=>[F]),append:n(()=>[i(c,{onClick:y.Conversion},{default:n(()=>[H]),_:1},8,["onClick"])]),_:1},8,["modelValue"])])]),_:1}),i(h,{title:"\u6211\u7684\u4F18\u60E0\u5238\u5217\u8868"},{default:n(()=>[i(b,{"default-value":t.type,value:t.type,"onUpdate:value":o[2]||(o[2]=e=>t.type=e),type:"line"},{default:n(()=>[i(k,{name:1,tab:"\u672A\u4F7F\u7528\u4F18\u60E0\u5238"}),i(k,{name:2,tab:"\u5DF2\u4F7F\u7528\u4F18\u60E0\u5238"})]),_:1},8,["default-value","value"]),t.data.data.length>=1?(l(),r("div",q,[i(V,{gutter:5},{default:n(()=>[(l(!0),r(x,null,M(t.data.data,e=>(l(),_(T,{span:6,style:{"margin-bottom":"0.15em","margin-top":"0.15em"}},{default:n(()=>[i(h,{title:e.name,style:{"text-align":"center","box-shadow":"1px 1px 12px #eee","border-radius":"0.5em"}},{default:n(()=>[i(v,{style:{width:"160px"}},{default:n(()=>[e.type==1?(l(),r("span",R,"\u6EE1"+p(e.minimum)+"\u5143,\u4F18\u60E0"+p(e.money)+"\u5143",1)):e.type==2?(l(),r("span",A,"\u65E0\u95E8\u69DB,\u4E0B\u5355\u7ACB\u51CF"+p(e.money)+"\u5143",1)):(l(),r("span",G,"\u6EE1"+p(e.minimum)+"\u5143,\u4EAB\u53D7"+p(e.money/10)+"\u6298\u4F18\u60E0",1))]),_:2},1024),s("div",I,[e.apply==1?(l(),_(c,{key:0,type:"primary",plain:"",size:"small"},{default:n(()=>[d("\u5355\u54C1\u5238["+p(e.gid)+"]",1)]),_:2},1024)):e.apply==2?(l(),_(c,{key:1,type:"warning",plain:"",size:"small"},{default:n(()=>[d("\u54C1\u7C7B\u5238["+p(e.cid)+"]",1)]),_:2},1024)):(l(),_(c,{key:2,type:"success",size:"small",plain:""},{default:n(()=>[J]),_:1})),e.type==1?(l(),_(c,{key:3,type:"danger",text:"",bg:"",size:"small",onClick:C=>{t.CouponData=e,t.show=!0}},{default:n(()=>[K]),_:2},1032,["onClick"])):e.type==2?(l(),_(c,{key:4,type:"success",text:"",bg:"",size:"small",onClick:C=>{t.CouponData=e,t.show=!0}},{default:n(()=>[O]),_:2},1032,["onClick"])):(l(),_(c,{key:5,type:"warning",text:"",bg:"",size:"small",onClick:C=>{t.CouponData=e,t.show=!0}},{default:n(()=>[P]),_:2},1032,["onClick"]))]),t.type==1?(l(),r("div",Q,[e.expirytime>=1?(l(),_(w,{key:0,duration:e.expirytime*1e3,render:y.renderCountdown,active:!0},null,8,["duration","render"])):(l(),r("span",W,"\u4F18\u60E0\u5238\u5DF2\u5230\u671F"))])):(l(),r("div",X,[s("span",Y,"\u4E8E"+p(e.endtime)+"\u4F7F\u7528",1)]))]),_:2},1032,["title"])]),_:2},1024))),256))]),_:1})])):(l(),r("div",Z,[i(z,{description:"\u7A7A\u7A7A\u5982\u4E5F"})])),i(D,{onCurrentChange:y.getListCoupon,"default-page-size":t.limit,"page-size":t.limit,style:{"margin-top":"1em"},background:"","hide-on-single-page":"",small:"",layout:"total, prev, pager, next, jumper",total:t.data.count},null,8,["onCurrentChange","default-page-size","page-size","total"])]),_:1}),i(B,{modelValue:t.show,"onUpdate:modelValue":o[3]||(o[3]=e=>t.show=e),title:"\u4F18\u60E0\u5238\u9886\u53D6\u8BE6\u60C5"},{default:n(()=>[i(L,{striped:""},{default:n(()=>[$,s("tbody",null,[s("tr",null,[ee,s("td",null,p(t.CouponData.token),1)]),s("tr",null,[te,s("td",null,p(t.CouponData.gettime),1)]),t.CouponData.endtime?(l(),r("tr",oe,[ne,s("td",null,p(t.CouponData.endtime),1)])):U("",!0),s("tr",null,[le,s("td",null,p(t.CouponData.content),1)])])]),_:1})]),_:1},8,["modelValue"])],64)}var ue=j(N,[["render",se]]);export{ue as default};
