System.register(["./index-legacy.6abde332.js"],(function(e){"use strict";var a,t,l,r,d,o,i,n,s,u,p,c,m,f,y,g;return{setters:[function(e){a=e._,t=e.E,l=e.r,r=e.h,d=e.c,o=e.f,i=e.d,n=e.w,s=e.i,u=e.a,p=e.F,c=e.o,m=e.e,f=e.t,y=e.j,g=e.b}],execute:function(){const h={data:()=>({DataList:[],type:"1",name:"",page:1,limit:8,Tracking:"",count:1,loading:!1,title:"订单详情",state:!1,OrderData:[],loading2:{},state2:!1,Form:{},FormArr:{},state3:!1,TokenArr:[],SearchMode:!0}),watch:{type(e,a){this.type===e&&(this.page=1,this.count=0,this.DataListGet())},name(e,a){this.name===e&&(this.page=1,this.count=0,this.DataListGet())},page(e){this.DataListGet()}},created(){this.DataListGet()},methods:{SearchModeSet(e=!0){this.name="",this.page=1,this.count=0,this.SearchMode=e,this.DataListGet()},Router(e,a={}){this.$router.push({path:e,query:a})},Kami(e){this.TokenArr=[];for(let a=0;a<e.length;a++)this.TokenArr[a]=e[a].token;this.state3=!0},copyText(e){var a=document.createElement("input");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("Copy"),document.body.removeChild(a),this.$message({message:"复制成功",type:"success"})},Message(e){t.alert(e,"订单处理结果",{confirmButtonText:"OK"})},Open(e){open("../?mod=route&p=Goods&gid="+e)},OpenUrl(e){window.open(e)},InputArr(){let e=this.OrderData.data.input;if(0===e.length)return!1;let a={},t={};for(const l in e){let r=e[l].split("：");t[l]={name:r[0],value:r[1]},a[l]=r[1]}this.FormArr=t,this.Form=a,this.state2=!0},Take(e){let a=this;this.$ajax.post("ajax.php?act=HomeAjax&uac=OrderList&type=QueryTake",{id:e}).then((function(e){a.show2=!1,e.code>=0?(a.$message({message:e.msg,type:"success"}),a.DataListGet()):a.$message({message:e.msg,type:"error"})}))},OrderModification(){let e=this,a={oid:e.OrderData.data.id,order:e.OrderData.data.order,data:[]};for(const t in e.Form){if(""==e.Form[t])return e.$message({message:"请将第"+(t-0+1)+"行输入框填写完整！",type:"error"}),!1;a.data[t]=e.Form[t]}this.$ajax.get("ajax.php?act=HomeAjax&uac=OrderList&type=OrderModification",a).then((function(a){e.state2=!1,1===a.code?(e.$message({message:a.msg,type:"success"}),e.OrderDataGet(e.OrderData.data.id,e.OrderData.data.order,2),e.DataListGet()):e.$message({message:a.msg,type:"error"})}))},queue(){this.$ajax.post("ajax.php?act=HomeAjax&uac=SubmitOrder")},DataListGet(){this.queue();let e=this;this.loading=!0,this.$ajax.post("ajax.php?act=HomeAjax&uac=OrderList&type="+(this.SearchMode?"OrderAll":"QueryList"),{state:this.type,page:this.page,seek:this.name,msg:this.name,limit:this.limit}).then((function(a){if(e.loading=!1,a.code>=0){e.DataList=a.data,e.loading2={};for(let t=0;t<a.data.length;t++)e.loading2[a.data[t].id]=!1;e.Tracking=a.Tracking,e.count=a.count}else-2==a.code?(e.DataList=[],e.loading2={},e.count=0,e.$message({message:a.msg,type:"error"})):e.$message({message:a.msg,type:"error"})}))},OrderDataGet(e,a,t=1){let l=this;this.loading2[e]=!0,this.$ajax.post("ajax.php?act=HomeAjax&uac=OrderList&type=QueryDetails",{id:e,order:a}).then((function(r){l.loading2[e]=!1,r.code>=0&&(l.OrderData=r,1===t&&(l.state=!0,l.title="订单"+a+"详情"))}))}}},k={style:{"background-color":"#FFFFFF",padding:"1em","margin-bottom":"0.5em"}},_={style:{"padding-top":"0.3em"}},w={class:"card",style:{padding:"1.5em","border-radius":"0.2em","background-color":"#ffffff"}},O={style:{padding:"0.8em"}},D=m("已完成"),b=m("待发货"),x=m("异常中"),v=m("正在处理"),C=m("已退款"),z=m("售后中"),T=m("已评价"),A=m("未知状态"),L=["onClick"],j=m("商品已丢失"),M={style:{"font-size":"110%"}},V={key:0},F={key:0,style:{color:"#ff0000","font-size":"12px"}},H={key:1},S={style:{color:"red","margin-right":"0.5rem","font-size":"12px"}},$={style:{"text-decoration":"line-through",color:"#8f9298","font-size":"12px"}},U={key:1,style:{color:"darkorange","font-size":"12px"}},G={style:{"font-size":"12px","margin-left":"0.1rem"}},E={key:2,style:{color:"#07C160","font-size":"12px"}},q={key:3},I={key:0,style:{color:"#ff0000","font-size":"12px"}},K={key:1},Q={style:{color:"#ff0000","margin-right":"0.5rem","font-size":"12px"}},B={style:{"font-size":"12px","text-decoration":"line-through",color:"#8f9298"}},R={style:{"text-align":"center"}},N=m(" 详情 "),P=m("卡密 "),J=m("处理结果 "),W=m("收货"),X=m("售后"),Y={style:{"text-align":"center","margin-top":"1em"}},Z={style:{padding:"1em"}},ee=m(" 订单状态 "),ae=m(" 初始数量 "),te=m(" 下单数量 "),le=m(" 当前数量 "),re=m(" 提交时间 "),de=m(" 备注信息 "),oe=m(" 收货信息修改 "),ie=m("主机后台 "),ne=m(" 发起工单 "),se=m(" 订单编号 "),ue=m(" 商品名称 "),pe={style:{"word-wrap":"break-word","word-break":"break-all"}},ce=m(" 订单状态 "),me=m("已完成"),fe=m("待发货"),ye=m("异常中"),ge=m("正在处理"),he=m("已退款"),ke=m("售后中"),_e=m("已评价"),we=m("未知状态"),Oe=m(" 购买份数 "),De=m(" 每份数量 "),be=m(" 付款方式 "),xe=m(" 实付金额 "),ve=m(" 优惠金额 "),Ce=m(" 订单原价 "),ze=m(" 优惠券ID "),Te=m(" 处理时间 "),Ae=m(" 创建时间 "),Le=["innerHTML"],je=["innerHTML"],Me=["innerHTML"],Ve={class:"dialog-footer"},Fe=m("关闭"),He=m("复制全部"),Se={class:"dialog-footer"},$e=m("取消"),Ue=m("保存");e("default",a(h,[["render",function(e,a,t,h,Ge,Ee){const qe=l("el-page-header"),Ie=l("el-option"),Ke=l("el-select"),Qe=l("el-form-item"),Be=l("el-input"),Re=l("el-button"),Ne=l("el-form"),Pe=l("el-tag"),Je=l("el-table-column"),We=l("n-ellipsis"),Xe=l("el-popconfirm"),Ye=l("el-table"),Ze=l("n-pagination"),ea=l("el-descriptions-item"),aa=l("el-descriptions"),ta=l("n-alert"),la=l("el-scrollbar"),ra=l("el-drawer"),da=l("el-dialog"),oa=r("loading");return c(),d(p,null,[o("div",k,[i(qe,{onBack:a[0]||(a[0]=e=>Ee.Router("/user/home")),content:"订单查询"})]),o("div",_,[o("div",w,[o("div",O,[i(Ne,{inline:!0,class:"demo-form-inline"},{default:n((()=>[i(Qe,{label:"订单状态"},{default:n((()=>[i(Ke,{modelValue:Ge.type,"onUpdate:modelValue":a[1]||(a[1]=e=>Ge.type=e),size:"medium",placeholder:"订单状态"},{default:n((()=>[i(Ie,{label:"全部",value:"1"}),i(Ie,{label:"未完成",value:"2"}),i(Ie,{label:"待收货",value:"3"}),i(Ie,{label:"已收货",value:"4"}),i(Ie,{label:"已取消",value:"5"})])),_:1},8,["modelValue"])])),_:1}),i(Qe,{label:"下单信息"},{default:n((()=>[i(Be,{modelValue:Ge.name,"onUpdate:modelValue":a[2]||(a[2]=e=>Ge.name=e),size:"medium",placeholder:"请输入下单信息"},null,8,["modelValue"])])),_:1}),i(Qe,null,{default:n((()=>[i(Re,{text:"",bg:"",type:Ge.SearchMode?"danger":"success",onClick:a[3]||(a[3]=e=>Ee.SearchModeSet(!Ge.SearchMode))},{default:n((()=>[m(f(Ge.SearchMode?"点击查询游客订单":"点击查询绑定订单"),1)])),_:1},8,["type"])])),_:1})])),_:1})]),s((c(),u(Ye,{data:Ge.DataList,style:{width:"100%"}},{default:n((()=>[i(Je,{fixed:"",width:"100",label:"订单状态"},{default:n((e=>[1==e.row.state?(c(),u(Pe,{key:0,type:"success"},{default:n((()=>[D])),_:1})):2==e.row.state?(c(),u(Pe,{key:1},{default:n((()=>[b])),_:1})):3==e.row.state?(c(),u(Pe,{key:2,type:"danger"},{default:n((()=>[x])),_:1})):4==e.row.state?(c(),u(Pe,{key:3,type:"warning"},{default:n((()=>[v])),_:1})):5==e.row.state?(c(),u(Pe,{key:4,type:"info"},{default:n((()=>[C])),_:1})):6==e.row.state?(c(),u(Pe,{key:5,type:"danger"},{default:n((()=>[z])),_:1})):7==e.row.state?(c(),u(Pe,{key:6,type:"success"},{default:n((()=>[T])),_:1})):(c(),u(Pe,{key:7,type:"info"},{default:n((()=>[A])),_:1}))])),_:1}),i(Je,{width:"150",label:"下单参数"},{default:n((e=>[(c(!0),d(p,null,y(e.row.input,((a,t)=>(c(),d("div",{style:{color:"#55557f","font-size":"12px"},key:t},f(null==e.row.value[t]?"输入框"+(t-0+1):e.row.value[t])+"："+f(a),1)))),128))])),_:1}),i(Je,{width:"150",label:"商品名称"},{default:n((e=>[e.row.name?(c(),u(We,{key:0,style:{"max-width":"150px",color:"#5555ff"}},{default:n((()=>[o("span",{style:{cursor:"pointer","font-size":"12px"},onClick:a=>Ee.Open(e.row.gid)},f(e.row.name),9,L)])),_:2},1024)):(c(),u(We,{key:1,style:{"max-width":"150px",color:"red","font-size":"12px"}},{default:n((()=>[j])),_:1}))])),_:1}),i(Je,{label:"订单金额",width:"150"},{default:n((e=>[o("div",M,["余额付款"==e.row.payment?(c(),d("span",V,[-1==e.row.coupon?(c(),d("span",F,"￥"+f(e.row.price),1)):(c(),d("span",H,[o("span",S,"￥"+f(e.row.price),1),o("span",$,f(e.row.originalprice)+"元",1)]))])):"积分兑换"==e.row.payment?(c(),d("span",U,[m(f(e.row.price)+" ",1),o("span",G,f(e.row.currency),1)])):"免费领取"==e.row.payment?(c(),d("span",E,"免费商品")):(c(),d("span",q,[-1==e.row.coupon?(c(),d("span",I,"￥"+f(e.row.price),1)):(c(),d("span",K,[o("span",Q,"￥"+f(e.row.price),1),o("span",B,f(e.row.originalprice)+"元",1)]))]))])])),_:1}),i(Je,{label:"发货数",width:"100"},{default:n((e=>[i(Pe,{type:"info",size:"small"},{default:n((()=>[m(f(e.row.quantity*e.row.num)+f(e.row.units),1)])),_:2},1024)])),_:1}),i(Je,{label:"下单时间",width:"200",prop:"addtime"}),i(Je,{fixed:"right",label:"操作",width:"220"},{default:n((e=>[o("div",R,[i(Re,{size:"small",onClick:a=>Ee.OrderDataGet(e.row.id,e.row.order),type:"primary",loading:Ge.loading2[e.row.id],plain:""},{default:n((()=>[N])),_:2},1032,["onClick","loading"]),e.row.Token.length>=1?(c(),u(Re,{key:0,size:"small",onClick:a=>Ee.Kami(e.row.Token),plain:"",type:"danger"},{default:n((()=>[P])),_:2},1032,["onClick"])):g("",!0),-1!=e.row.remark?(c(),u(Re,{key:1,size:"small",onClick:a=>Ee.Message(e.row.remark),type:"warning",plain:""},{default:n((()=>[J])),_:2},1032,["onClick"])):g("",!0),-1!=e.row.logistics?(c(),u(Re,{key:2,onClick:a=>Ee.OpenUrl(Ge.Tracking+e.row.logistics.order),size:"small",type:"success",plain:""},{default:n((()=>[m(f(e.row.logistics.name),1)])),_:2},1032,["onClick"])):g("",!0),1==e.row.take&&1==e.row.state?(c(),u(Xe,{key:3,title:"确认收货吗?",onConfirm:a=>Ee.Take(e.row.id)},{reference:n((()=>[i(Re,{size:"small",plain:"",type:"success"},{default:n((()=>[W])),_:1})])),_:2},1032,["onConfirm"])):g("",!0),1==e.row.take&&1!=e.row.state&&5!=e.row.state&&7!=e.row.state?(c(),u(Xe,{key:4,title:"确认要发起售后工单吗?",onConfirm:a=>Ee.OpenUrl("./tickets_new.php?id="+e.row.id)},{reference:n((()=>[i(Re,{size:"small",plain:"",type:"danger"},{default:n((()=>[X])),_:1})])),_:2},1032,["onConfirm"])):g("",!0)])])),_:1})])),_:1},8,["data"])),[[oa,Ge.loading]]),o("div",Y,[i(Ze,{style:{"margin-top":"1em"},background:"","hide-on-single-page":"",small:"",layout:"total, prev, pager, next, jumper","page-size":Ge.limit,"item-count":Ge.count,page:Ge.page,"onUpdate:page":a[4]||(a[4]=e=>Ge.page=e)},null,8,["page-size","item-count","page"])])]),i(ra,{withHeader:!1,size:"50%",modelValue:Ge.state,"onUpdate:modelValue":a[11]||(a[11]=e=>Ge.state=e),direction:"rtl"},{default:n((()=>[o("div",Z,[i(la,{height:"92vh"},{default:n((()=>[1==Ge.OrderData.data.ApiSn?(c(),u(aa,{key:0,style:{"margin-bottom":"1em"},class:"margin-top",title:"订单完成进度[实时]",column:1,border:""},{default:n((()=>[i(ea,null,{label:n((()=>[ee])),default:n((()=>[m(" "+f(Ge.OrderData.data.ApiState),1)])),_:1}),i(ea,null,{label:n((()=>[ae])),default:n((()=>[m(" "+f(Ge.OrderData.data.ApiInitial),1)])),_:1}),i(ea,null,{label:n((()=>[te])),default:n((()=>[m(" "+f(Ge.OrderData.data.ApiNum),1)])),_:1}),i(ea,null,{label:n((()=>[le])),default:n((()=>[m(" "+f(Ge.OrderData.data.ApiPresent),1)])),_:1}),i(ea,null,{label:n((()=>[re])),default:n((()=>[m(" "+f(Ge.OrderData.data.ApiTime),1)])),_:1}),"无"!=Ge.OrderData.data.ApiError?(c(),u(ea,{key:0},{label:n((()=>[de])),default:n((()=>[o("span",null,f(Ge.OrderData.data.ApiError),1)])),_:1})):g("",!0)])),_:1})):g("",!0),i(aa,{title:Ge.title,column:1,border:""},{extra:n((()=>[2!=Ge.OrderData.data.stateid&&3!=Ge.OrderData.data.stateid||1!=Ge.OrderData.OrderModification?g("",!0):(c(),u(Re,{key:0,onClick:a[5]||(a[5]=e=>Ee.InputArr()),type:"primary",size:"small"},{default:n((()=>[oe])),_:1})),1==Ge.OrderData.data.HostType?(c(),u(Re,{key:1,onClick:a[6]||(a[6]=e=>Ee.OpenUrl("../HostAdmin")),type:"warning",size:"small"},{default:n((()=>[ie])),_:1})):g("",!0),i(Re,{onClick:a[7]||(a[7]=e=>Ee.OpenUrl("./tickets_new.php?id="+Ge.OrderData.data.id)),type:"danger",size:"small"},{default:n((()=>[ne])),_:1})])),default:n((()=>[i(ea,null,{label:n((()=>[se])),default:n((()=>[o("span",{onClick:a[8]||(a[8]=e=>Ee.copyText(Ge.OrderData.data.order))},f(Ge.OrderData.data.order),1)])),_:1}),i(ea,null,{label:n((()=>[ue])),default:n((()=>[o("div",pe,f(Ge.OrderData.data.name),1)])),_:1}),i(ea,null,{label:n((()=>[ce])),default:n((()=>[o("div",null,[1==Ge.OrderData.data.stateid?(c(),u(Pe,{key:0,type:"success"},{default:n((()=>[me])),_:1})):2==Ge.OrderData.data.stateid?(c(),u(Pe,{key:1},{default:n((()=>[fe])),_:1})):3==Ge.OrderData.data.stateid?(c(),u(Pe,{key:2,type:"danger"},{default:n((()=>[ye])),_:1})):4==Ge.OrderData.data.stateid?(c(),u(Pe,{key:3,type:"warning"},{default:n((()=>[ge])),_:1})):5==Ge.OrderData.data.stateid?(c(),u(Pe,{key:4,type:"info"},{default:n((()=>[he])),_:1})):6==Ge.OrderData.data.stateid?(c(),u(Pe,{key:5,type:"danger"},{default:n((()=>[ke])),_:1})):7==Ge.OrderData.data.stateid?(c(),u(Pe,{key:6,type:"success"},{default:n((()=>[_e])),_:1})):(c(),u(Pe,{key:7,type:"info"},{default:n((()=>[we])),_:1}))])])),_:1}),i(ea,null,{label:n((()=>[Oe])),default:n((()=>[m(" "+f(Ge.OrderData.data.num)+"份 ",1)])),_:1}),i(ea,null,{label:n((()=>[De])),default:n((()=>[m(" "+f(Ge.OrderData.data.quantity)+f(Ge.OrderData.data.units),1)])),_:1}),i(ea,null,{label:n((()=>[be])),default:n((()=>[m(" "+f(Ge.OrderData.data.type),1)])),_:1}),i(ea,null,{label:n((()=>[xe])),default:n((()=>[m(" "+f(0==Ge.OrderData.data.price?"0元":Ge.OrderData.data.price+"元"),1)])),_:1}),-1!=Ge.OrderData.data.coupon?(c(),u(ea,{key:0},{label:n((()=>[ve])),default:n((()=>[m(" "+f(Ge.OrderData.data.discounts+"元"),1)])),_:1})):g("",!0),-1!=Ge.OrderData.data.coupon?(c(),u(ea,{key:1},{label:n((()=>[Ce])),default:n((()=>[m(" "+f(Ge.OrderData.data.originalprice)+"元 ",1)])),_:1})):g("",!0),-1!=Ge.OrderData.data.coupon?(c(),u(ea,{key:2},{label:n((()=>[ze])),default:n((()=>[m(" "+f(Ge.OrderData.data.coupon+"号"),1)])),_:1})):g("",!0),i(ea,null,{label:n((()=>[Te])),default:n((()=>{var e;return[m(" "+f(null!==(e=Ge.OrderData.data.endtime)&&void 0!==e?e:"未完成"),1)]})),_:1}),i(ea,null,{label:n((()=>[Ae])),default:n((()=>[m(" "+f(Ge.OrderData.data.addtiem),1)])),_:1})])),_:1},8,["title"]),-1!=Ge.OrderData.data.token_arr?(c(),u(aa,{key:1,style:{"margin-top":"1em"},onClick:a[9]||(a[9]=e=>Ee.copyText(Ge.OrderData.data.token_arr.join("\n\t"))),title:"卡密信息",column:1,border:""},{default:n((()=>[(c(!0),d(p,null,y(Ge.OrderData.data.token_arr,((e,a)=>(c(),u(ea,{key:a},{label:n((()=>[m(f("卡"+(a+1)),1)])),default:n((()=>[m(" "+f(e),1)])),_:2},1024)))),128))])),_:1})):g("",!0),i(aa,{onClick:a[10]||(a[10]=e=>Ee.copyText(Ge.OrderData.data.input.join("\n\t"))),style:{"margin-top":"1em"},title:"收货信息",column:2,border:""},{default:n((()=>[(c(!0),d(p,null,y(Ge.OrderData.data.input,((e,a)=>(c(),u(ea,{key:a},{label:n((()=>[m(f(e.split("：")[0]),1)])),default:n((()=>[m(" "+f(e.split("：")[1]),1)])),_:2},1024)))),128))])),_:1}),Object.keys(Ge.OrderData.data.Expansion).length>=1?(c(),u(aa,{key:2,style:{"margin-top":"1em"},title:"更多信息",column:1,border:""},{default:n((()=>[(c(!0),d(p,null,y(Ge.OrderData.data.Expansion,((e,a)=>(c(),u(ea,{key:a},{label:n((()=>[m(f(a),1)])),default:n((()=>[o("div",{innerHTML:e},null,8,Le)])),_:2},1024)))),128))])),_:1})):g("",!0),-1!=Ge.OrderData.data.Explain?(c(),u(ta,{key:3,"show-icon":!1,title:"发货信息",type:"info",style:{"margin-top":"1em"}},{default:n((()=>[o("div",{innerHTML:Ge.OrderData.data.Explain},null,8,je)])),_:1})):g("",!0),i(ta,{title:"商品说明","show-icon":!1,style:{"margin-top":"1em"}},{default:n((()=>[o("div",{innerHTML:Ge.OrderData.data.docs},null,8,Me)])),_:1})])),_:1})])])),_:1},8,["modelValue"]),i(da,{modelValue:Ge.state3,"onUpdate:modelValue":a[14]||(a[14]=e=>Ge.state3=e),title:"卡密信息",width:"400px"},{footer:n((()=>[o("span",Ve,[i(Re,{onClick:a[12]||(a[12]=e=>Ge.state3=!1)},{default:n((()=>[Fe])),_:1}),i(Re,{type:"primary",onClick:a[13]||(a[13]=e=>Ee.copyText(Ge.TokenArr.join("\n\t")))},{default:n((()=>[He])),_:1})])])),default:n((()=>[i(aa,{column:1,border:""},{default:n((()=>[(c(!0),d(p,null,y(Ge.TokenArr,((e,a)=>(c(),u(ea,{key:a},{label:n((()=>[m(f("卡"+(a+1)),1)])),default:n((()=>[m(" "+f(e),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"]),i(da,{modelValue:Ge.state2,"onUpdate:modelValue":a[17]||(a[17]=e=>Ge.state2=e),title:"修改收货信息",width:"400px"},{footer:n((()=>[o("span",Se,[i(Re,{onClick:a[15]||(a[15]=e=>Ge.state2=!1)},{default:n((()=>[$e])),_:1}),i(Re,{type:"primary",onClick:a[16]||(a[16]=e=>Ee.OrderModification())},{default:n((()=>[Ue])),_:1})])])),default:n((()=>[i(Ne,{ref:"form",model:Ge.Form},{default:n((()=>[(c(!0),d(p,null,y(Ge.FormArr,((e,a)=>(c(),u(Qe,{key:a,label:e.name},{default:n((()=>[i(Be,{modelValue:Ge.Form[a],"onUpdate:modelValue":e=>Ge.Form[a]=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])))),128))])),_:1},8,["model"])])),_:1},8,["modelValue"])])],64)}]]))}}}));
