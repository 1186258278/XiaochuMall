import{_ as B,E as C,m as A,r as d,c as b,f,d as a,w as t,F as M,o as c,e as r,t as _,a as p}from"./index.7e8edd7c.js";const S={name:"CommodityManagement",data(){return{GoodsList:[],Count:0,page:1,limit:6,name:""}},watch:{name(){this.getConfigureInform(1)}},mounted(){this.getConfigureInform(1)},methods:{commonPriceAdjust(i,o=0){let n=this;C.prompt("\u8BF7\u8F93\u5165\u5546\u54C1\u6DA8\u5E45\u767E\u5206\u6BD4\uFF0C\u8F93\u51651\u76F8\u5F53\u4E8E\u6DA8\u4EF71%\uFF01","\u5546\u54C1\u6DA8\u5E45\u914D\u7F6E",{confirmButtonText:"\u786E\u8BA4\u4FEE\u6539",cancelButtonText:"\u53D6\u6D88",inputValue:o,inputPattern:/^[0-9]*$/,inputErrorMessage:"\u8BF7\u586B\u5199\u6B63\u786E\u7684\u5185\u5BB9,\u53EA\u80FD\u591F\u8F93\u51650-1000\u8303\u56F4\u7684\u6570\u5B57"}).then(u=>{let l=u.value-0;if(l<0||l>1e3){A({type:"info",message:"\u4EF7\u683C\u6DA8\u5E45\u6BD4\u4F8B\u4E0D\u80FD\u4F4E\u4E8E0%\uFF0C\u6216\u9AD8\u4E8E1000%\uFF01"});return}n.$ajax.post("ajax.php?act=AlterPrice",{gid:i,rise:l,name:n.name}).then(function(s){s.code>=0?(n.$message({message:s.msg,type:"success",grouping:!0}),n.getConfigureInform(n.page)):n.$message({message:s.msg,type:"error",grouping:!0})})})},commonStatusAdjust(i,o=1){let n=this;C.confirm("\u786E\u8BA4\u5C06"+(i==-1?"\u8FD9\u4E9B":"\u6B64")+"\u5546\u54C1\u8BBE\u7F6E\u4E3A"+(o==1?"\u4E0A\u67B6":"\u4E0B\u67B6")+"\u72B6\u6001\u5417\uFF1F","\u6E29\u99A8\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{n.$ajax.post("ajax.php?act=GoodsState",{gid:i,state:o,name:n.name}).then(function(u){u.code>=0?(n.$message({message:u.msg,type:"success",grouping:!0}),n.getConfigureInform(n.page)):n.$message({message:u.msg,type:"error",grouping:!0})})})},Router(i,o={}){this.$router.push({path:i,query:o})},fomatFloat(i,o){var n=parseFloat(i);if(isNaN(n))return!1;n=Math.round(i*Math.pow(10,o))/Math.pow(10,o);var u=n.toString(),l=u.indexOf(".");for(l<0&&(l=u.length,u+=".");u.length<=l+o;)u+="0";return u},getConfigureInform(i=1){this.page=i;let o=this;this.$ajax.post("ajax.php?act=GoodsList",{page:i,limit:this.limit,name:this.name}).then(function(n){n.code>=0?(o.GoodsList=n.data,o.Count=n.count):C.alert(n.msg,"\u8B66\u544A",{confirmButtonText:"\u597D\u7684",dangerouslyUseHTMLString:!0})})}}},T={style:{"background-color":"#FFFFFF",padding:"1em","margin-bottom":"0.5em"}},V={style:{"margin-bottom":"1em"}},I=r("\u7B5B\u9009\u5546\u54C1"),P=r("\u4E00\u952E\u4E0A\u67B6"),z=r("\u4E00\u952E\u4E0B\u67B6"),E=r("\u4E00\u952E\u8C03\u4EF7"),G=["src"],L=r("\u4E0A\u67B6\u4E2D "),N=r("\u5DF2\u4E0B\u67B6 "),$=r("\u672A\u8C03\u4EF7 "),q={style:{color:"#0791e7"}},R={key:0,style:{color:"#999"}},U={key:1,style:{color:"rgba(255,0,0,0.75)"}},D=r("\u6709\u8D27"),H=r("\u7F3A\u8D27"),O=r(" \u6DA8\u4EF7\u540E\u7684\u6548\u679C\u60A8\u4EC5\u53EF\u5728\u672A\u767B\u5F55\u7684\u60C5\u51B5\u4E0B\uFF0C\u8BBF\u95EE\u81EA\u5DF1\u7684\u5E97\u94FA\u57DF\u540D\u67E5\u770B\u54E6 "),J=r(" \u4EF7\u683C\u6DA8\u5E45\u767E\u5206\u6BD4\u53EA\u53EF\u586B\u5199\u6570\u5B57\uFF0C\u586B1\u5C31\u76F8\u5F53\u4E8E\u5C06\u6B64\u5546\u54C1\u6DA8\u4EF7\u767E\u5206\u4E4B1\uFF0C\u4EE5\u6B64\u7C7B\u63A8\uFF01 "),K=r(" \u82E5\u60A8\u5728\u767B\u9646\u72B6\u6001\u4E0B\u8BBF\u95EE\u60A8\u7684\u5E97\u94FA\u57DF\u540D\uFF0C\u5546\u54C1\u552E\u4EF7\u8FD8\u662F\u4F1A\u663E\u793A\u4E3A\u60A8\u7684\u6210\u672C\u4EF7\uFF0C\u5982\u679C\u5176\u4ED6\u5DF2\u767B\u9646\u7528\u6237\u7684\u7528\u6237\u7B49\u7EA7\u548C\u4F60\u4E00\u6837\uFF0C\u751A\u81F3\u6BD4\u4F60\u9AD8\uFF0C\u4E5F\u662F\u4E0D\u4F1A\u6709\u52A0\u4EF7\u6548\u679C\u7684\uFF01 ");function Q(i,o,n,u,l,s){const x=d("el-page-header"),v=d("el-input"),h=d("el-button"),y=d("n-card"),m=d("el-table-column"),g=d("el-tag"),j=d("el-table"),F=d("el-pagination"),w=d("n-alert");return c(),b(M,null,[f("div",T,[a(x,{onBack:o[0]||(o[0]=e=>s.Router("/user/shop")),content:"\u5546\u54C1\u914D\u7F6E"})]),a(y,{title:"\u6279\u91CF\u64CD\u4F5C",style:{"margin-bottom":"0.5em"}},{default:t(()=>[f("div",V,[a(v,{modelValue:l.name,"onUpdate:modelValue":o[1]||(o[1]=e=>l.name=e),placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0\u6765\u7B5B\u9009\u5546\u54C1\uFF01"},{prepend:t(()=>[I]),_:1},8,["modelValue"])]),a(h,{plain:"",type:"success",onClick:o[2]||(o[2]=e=>s.commonStatusAdjust(-1,1))},{default:t(()=>[P]),_:1}),a(h,{plain:"",type:"danger",onClick:o[3]||(o[3]=e=>s.commonStatusAdjust(-1,-1))},{default:t(()=>[z]),_:1}),a(h,{type:"primary",plain:"",onClick:o[4]||(o[4]=e=>s.commonPriceAdjust(-1,0))},{default:t(()=>[E]),_:1})]),_:1}),a(y,{title:"\u5546\u54C1\u7BA1\u7406",style:{"margin-bottom":"0.5em"}},{default:t(()=>[a(j,{data:l.GoodsList,size:"",stripe:"",style:{width:"100%"}},{default:t(()=>[a(m,{label:"\u5546\u54C1\u540D"},{default:t(e=>[r(" ["+_(e.row.gid)+"] "+_(e.row.name),1)]),_:1}),a(m,{label:"\u5546\u54C1\u56FE"},{default:t(e=>[f("img",{style:{width:"36px",height:"36px"},src:e.row.image},null,8,G)]),_:1}),a(m,{label:"\u72B6\u6001"},{default:t(e=>[e.row.state==1?(c(),p(g,{key:0,effect:"dark",onClick:k=>s.commonStatusAdjust(e.row.gid,-1),style:{cursor:"pointer"},type:"success"},{default:t(()=>[L]),_:2},1032,["onClick"])):(c(),p(g,{key:1,effect:"dark",onClick:k=>s.commonStatusAdjust(e.row.gid,1),style:{cursor:"pointer"},type:"danger"},{default:t(()=>[N]),_:2},1032,["onClick"]))]),_:1}),a(m,{label:"\u8C03\u4EF7"},{default:t(e=>[e.row.rise==0?(c(),p(g,{key:0,effect:"dark",style:{cursor:"pointer"},onClick:k=>s.commonPriceAdjust(e.row.gid,e.row.rise)},{default:t(()=>[$]),_:2},1032,["onClick"])):(c(),p(g,{key:1,effect:"dark",style:{cursor:"pointer"},onClick:k=>s.commonPriceAdjust(e.row.gid,e.row.rise),type:"warning"},{default:t(()=>[r("\u6DA8"+_(e.row.rise)+"% ",1)]),_:2},1032,["onClick"]))]),_:1}),a(m,{label:"\u6210\u672C"},{default:t(e=>[f("span",q,_(s.fomatFloat(e.row.price,2))+"\u5143",1)]),_:1}),a(m,{label:"\u552E\u4EF7"},{default:t(e=>[e.row.rise==0?(c(),b("span",R,"\u539F\u4EF7")):(c(),b("span",U,_(s.fomatFloat(e.row.price+e.row.price*(e.row.rise/100),2))+"\u5143",1))]),_:1}),a(m,{label:"\u6BCF\u4EFD\u53D1\u8D27"},{default:t(e=>[f("span",null,_(e.row.quantity)+_(e.row.units),1)]),_:1}),a(m,{label:"\u9500\u91CF"},{default:t(e=>[f("span",null,_(e.row.sales>1e4?e.row.sales>1e5?"10\u4E07+":"1\u4E07+":e.row.sales)+"\u4EFD",1)]),_:1}),a(m,{label:"\u5E93\u5B58"},{default:t(e=>[e.row.quota>=1?(c(),p(g,{key:0,type:"success"},{default:t(()=>[D]),_:1})):(c(),p(g,{key:1,type:"danger"},{default:t(()=>[H]),_:1}))]),_:1})]),_:1},8,["data"]),a(F,{style:{"margin-top":"1em"},background:"","hide-on-single-page":"",small:"",layout:"total, prev, pager, next, jumper",onCurrentChange:s.getConfigureInform,"page-size":l.limit,"default-page-size":l.limit,total:l.Count},null,8,["onCurrentChange","page-size","default-page-size","total"])]),_:1}),a(y,{title:"\u6CE8\u610F\u4E8B\u9879"},{default:t(()=>[a(w,{"show-icon":!1,style:{"margin-bottom":"0.5em"}},{default:t(()=>[O]),_:1}),a(w,{"show-icon":!1,style:{"margin-bottom":"0.5em"}},{default:t(()=>[J]),_:1}),a(w,{"show-icon":!1,style:{"margin-bottom":"0.5em"}},{default:t(()=>[K]),_:1})]),_:1})],64)}var X=B(S,[["render",Q]]);export{X as default};
