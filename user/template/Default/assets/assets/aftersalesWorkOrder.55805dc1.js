import{_ as I,p as N,r as n,c as S,d as e,w as t,F as E,o as d,e as i,t as p,a as m,f as k,k as L,l as T}from"./index.7e8edd7c.js";const V={name:"ticket",components:{Plus:N},data(){return{tableData:[],countList:{a1:0,a2:0,a3:0,a4:0},show:!1,show2:!1,state:0,stateName:"all",id:-1,page:1,limit:8,Num:0}},watch:{show(a,s){a==!1&&this.obtainIncomeAndExpenditureDetails(1)},show2(a,s){a==!1&&this.obtainIncomeAndExpenditureDetails(1)}},mounted(){this.TabSet()},methods:{Router(a,s={}){this.$router.push({path:a,query:s})},WorkOrderDetails(a){this.id=a,this.show=!0},TabSet(a="all"){this.state==0?a="all":a=this.state,this.stateName=a,this.obtainIncomeAndExpenditureDetails(1)},obtainIncomeAndExpenditureDetails(a=1){let s=this;this.$ajax.post("ajax.php?act=Tickets&type=list",{state:this.stateName,page:a,limit:this.limit}).then(function(r){r.code>=0?(s.tableData=r.data,s.countList=r.count,s.Num=r.num):s.$message({message:r.msg,type:"error",grouping:!0})})}}},A=a=>(L("data-v-79d4abce"),a=a(),T(),a),B=i("\u521B\u5EFA\u5DE5\u5355"),O=i(" \u5DE5\u5355\u8BE6\u60C5 "),W=i(" \u5F85\u5BA2\u670D\u56DE\u590D "),j=i(" \u5BA2\u670D\u5DF2\u56DE\u590D "),U=i(" \u5DF2\u89E3\u51B3 "),F=i(" \u5DF2\u5173\u95ED "),q=i(" \u5DF2\u8BC4\u4EF7 "),P=A(()=>k("iframe",{src:"./tickets_new.php",style:{width:"100%",height:"100%",border:"none"}},null,-1)),R=["src"];function G(a,s,r,H,l,w){const u=n("n-card"),h=n("el-col"),x=n("el-row"),b=n("el-button"),f=n("el-tab-pane"),v=n("el-tabs"),_=n("el-table-column"),D=n("n-ellipsis"),c=n("n-tag"),z=n("el-table"),C=n("el-pagination"),g=n("n-drawer-content"),y=n("n-drawer");return d(),S(E,null,[e(x,{gutter:5,style:{"margin-bottom":"0.5em"}},{default:t(()=>[e(h,{span:6},{default:t(()=>[e(u,{title:"\u5DE5\u5355\u603B\u6570"},{default:t(()=>[i(p(l.countList.a1)+"\u6761 ",1)]),_:1})]),_:1}),e(h,{span:6},{default:t(()=>[e(u,{title:"\u5DF2\u89E3\u51B3"},{default:t(()=>[i(p(l.countList.a2)+"\u6761 ",1)]),_:1})]),_:1}),e(h,{span:6},{default:t(()=>[e(u,{title:"\u5904\u7406\u4E2D"},{default:t(()=>[i(p(l.countList.a3)+"\u6761 ",1)]),_:1})]),_:1}),e(h,{span:6},{default:t(()=>[e(u,{title:"\u5DF2\u5173\u95ED"},{default:t(()=>[i(p(l.countList.a4)+"\u6761 ",1)]),_:1})]),_:1})]),_:1}),e(u,{title:"\u5DE5\u5355\u5217\u8868",style:{"margin-top":"0.5em"}},{"header-extra":t(()=>[e(b,{type:"success",plain:"",onClick:s[0]||(s[0]=o=>l.show2=!0)},{default:t(()=>[B]),_:1})]),default:t(()=>[e(v,{onTabChange:s[1]||(s[1]=o=>w.TabSet()),modelValue:l.state,"onUpdate:modelValue":s[2]||(s[2]=o=>l.state=o)},{default:t(()=>[e(f,{label:"\u5168\u90E8"}),e(f,{label:"\u5DF2\u89E3\u51B3"}),e(f,{label:"\u5904\u7406\u4E2D"}),e(f,{label:"\u5DF2\u5173\u95ED"})]),_:1},8,["modelValue"]),e(z,{data:l.tableData,stripe:"",style:{width:"100%"}},{default:t(()=>[e(_,{label:"\u64CD\u4F5C",width:"110"},{default:t(o=>[e(b,{size:"small",color:"#626aef",onClick:J=>w.WorkOrderDetails(o.row.id),type:"success"},{default:t(()=>[O]),_:2},1032,["onClick"])]),_:1}),e(_,{prop:"class",label:"\u95EE\u9898\u7C7B\u578B",width:"120"}),e(_,{label:"\u5DE5\u5355\u6807\u9898",width:"130"},{default:t(o=>[e(D,{style:{"max-width":"100px"}},{default:t(()=>[i(p(o.row.name),1)]),_:2},1024)]),_:1}),e(_,{label:"\u5B9E\u65F6\u72B6\u6001",width:"100"},{default:t(o=>[o.row.type==1?(d(),m(c,{key:0,size:"small",type:"warning"},{default:t(()=>[W]),_:1})):o.row.type==2?(d(),m(c,{key:1,size:"small",type:"error"},{default:t(()=>[j]),_:1})):o.row.type==3?(d(),m(c,{key:2,size:"small",type:"success"},{default:t(()=>[U]),_:1})):o.row.type==4?(d(),m(c,{key:3,size:"small",type:"info"},{default:t(()=>[F]),_:1})):(d(),m(c,{key:4,size:"small",type:"success"},{default:t(()=>[q]),_:1}))]),_:1}),e(_,{label:"\u5173\u8054\u8BA2\u5355"},{default:t(o=>[i(p(o.row.order=="\u4E0D\u9009\u62E9\u76F8\u5173\u8BA2\u5355"?"\u672A\u5173\u8054\u4EFB\u4F55\u8BA2\u5355":o.row.order),1)]),_:1}),e(_,{prop:"addtime",label:"\u521B\u5EFA\u65F6\u95F4"})]),_:1},8,["data"]),e(C,{onCurrentChange:w.obtainIncomeAndExpenditureDetails,"default-page-size":l.limit,"page-size":l.limit,style:{"margin-top":"1em"},background:"","hide-on-single-page":"",small:"",layout:"total, prev, pager, next, jumper",total:l.Num},null,8,["onCurrentChange","default-page-size","page-size","total"])]),_:1}),e(y,{show:l.show2,"onUpdate:show":s[3]||(s[3]=o=>l.show2=o),width:840,placement:"right"},{default:t(()=>[e(g,{title:"\u521B\u5EFA\u5DE5\u5355"},{default:t(()=>[P]),_:1})]),_:1},8,["show"]),e(y,{show:l.show,"onUpdate:show":s[4]||(s[4]=o=>l.show=o),width:840,placement:"right"},{default:t(()=>[e(g,{title:"\u5DE5\u5355\u8BE6\u60C5 - "+l.id},{default:t(()=>[k("iframe",{src:"./tickets_code.php?id="+l.id,style:{width:"100%",height:"100%",border:"none"}},null,8,R)]),_:1},8,["title"])]),_:1},8,["show"])],64)}var M=I(V,[["render",G],["__scopeId","data-v-79d4abce"]]);export{M as default};
