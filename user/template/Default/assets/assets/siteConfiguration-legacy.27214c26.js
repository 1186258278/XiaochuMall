!function(){var e=document.createElement("style");e.innerHTML=".avatar-uploader .avatar[data-v-7e2514ac]{width:178px;display:block}.avatar-uploader .el-upload{border:1px dashed var(--el-border-color);border-radius:6px;cursor:pointer;position:relative;overflow:hidden;transition:var(--el-transition-duration-fast)}.avatar-uploader .el-upload:hover{border-color:var(--el-color-primary)}.el-icon.avatar-uploader-icon{font-size:28px;color:#8c939d;width:178px;text-align:center}\n",document.head.appendChild(e),System.register(["./index-legacy.6abde332.js"],(function(e){"use strict";var l,a,o,t,n,r,d,u,i,s,m,c,p,f,g,b,_,h,y,V,v;return{setters:[function(e){l=e.u,a=e.x,o=e.y,t=e.z,n=e.A,r=e.B,d=e.o,u=e.c,i=e.f,s=e.t,m=e.b,c=e.F,p=e._,f=e.p,g=e.E,b=e.r,_=e.d,h=e.w,y=e.k,V=e.l,v=e.e}],execute:function(){const F=e=>e+"_"+(Date.now()+Math.floor(1e6*Math.random())),S=()=>{const e="undefined"!=typeof window?window:global;return e&&"tinymce"in e?e.tinymce:null};function k(e){return e?e.getContent():""}function x(e,l){l&&l.setContent(e)}function I(e,l=!0){e&&e.mode.set(l?"readonly":"design")}function C(e,l,a){return new Promise(((o,t)=>{let n,r,{images_upload_url:d,images_upload_credentials:u,custom_images_upload_header:i,custom_images_upload_param:s,custom_images_upload_callback:m}=e||{};n=new XMLHttpRequest,n.withCredentials=!!u,n.open("POST",d||""),i&&Object.keys(i).forEach((e=>{n.setRequestHeader(e,i[e])})),n.upload.onprogress=function(e){a(e.loaded/e.total*100)},n.onload=function(){if(403===n.status)return void t({message:"HTTP Error: "+n.status,remove:!0});if(n.status<200||n.status>=300)return void t("HTTP Error: "+n.status);let e=JSON.parse(n.responseText);if(!e)return void t("Invalid JSON: "+n.responseText);let l="function"==typeof m?m(e):e.location;l?o(l):t("Failed Path: location image path is error/empty")},n.onerror=function(){t("Image upload failed due to a XHR Transport error. Code: "+n.status)},r=new FormData,r.append("file",l.blob(),l.filename()),s&&Object.keys(s).forEach((e=>{r.append(e,s[e])})),n.send(r)}))}const U=(()=>{let e={status:{},loadedCallbacks:{}};const l=l=>{e.loadedCallbacks[l]&&(e.loadedCallbacks[l].forEach((e=>{"function"==typeof e.handler&&e.handler.call(e.scope)})),e.loadedCallbacks[l]=void 0)};return{load:(a,o,t)=>{o&&(e.loadedCallbacks[a]||(e.loadedCallbacks[a]=[]),e.loadedCallbacks[a].push({handler:o,scope:t||globalThis})),"LOADED"!==e.status[a]?"LOADING"!==e.status[a]&&(e.status[a]="LOADING",((e,l)=>{const a=document.createElement("script");a.id=F("tiny-script"),a.type="application/javascript",a.src=e,a.referrerPolicy="origin";const o=()=>{a.removeEventListener("load",o),l()};a.addEventListener("load",o),(document.head||document.body).appendChild(a)})(a,(()=>{e.status[a]="LOADED",l(a)}))):l(a)}}})(),w=["id"],T={key:0},O={name:"Vue3Tinymce"},j=Object.assign(O,{props:{modelValue:String,setting:{type:Object,default:()=>({})},setup:Function,disabled:Boolean,scriptSrc:String,debug:Boolean},emits:["update:modelValue","init","change"],setup(e,{expose:p,emit:f}){const g=e;let b=!0;const _=l({editor:null,id:F("tinymce"),err:""}),h=()=>{var e;return String(null!=(e=g.modelValue)?e:"")},y=(e,l,a)=>{g.debug&&console.log(`来自：${e.type} | \n ${l} \n ${a||"--"}`)},V=(e,l)=>{l||(l=_.editor);const a=k(l);y(e,a),f("update:modelValue",a),f("change",a)},v=()=>{var e;if(null===S())return void(_.err="tinymce is null");g.debug&&console.warn("vue3-tinymce 进入debug模式");let l={...g.setting,selector:`#${_.id}`,content_style:(a=null==(e=g.setting)?void 0:e.content_style,"body{font-size: 14px;} img{padding: 0 2px;} "+(a||"")),setup:e=>{_.editor=e,g.setup&&g.setup(e),e.on("init",(()=>(e=>{x(h(),e),g.disabled&&"readonly"!==e.mode.get()&&I(e),e.on("change input undo redo",(l=>{V(l,e)})),f("init",e)})(e)))}};var a;g.setting.custom_images_upload&&(l.images_upload_handler=(...e)=>C.apply(null,[g.setting,...e])),S().init(l),b=!1};return a((()=>g.modelValue),((e,l)=>{if(_.editor&&_.editor.initialized&&l!==e&&e!==k(_.editor)){if(y({type:"propsChanged to setContent"},e,l),null===e)return function(e,l){if(l){if(l.resetContent)return l.resetContent(e);l.setContent(e),l.setDirty(!1),l.undoManager.clear()}}("",_.editor);x(h(),_.editor)}})),a((()=>g.disabled),(e=>{_.editor&&_.editor.initialized&&I(_.editor,e)})),p({id:_.id,editor:_.editor}),o((()=>{var e;if(null!==S())return void v();const l=null!=(e=g.scriptSrc)?e:"https://cdn.bootcdn.net/ajax/libs/tinymce/6.1.2/tinymce.min.js";U.load(l,v)})),t((()=>{b||v()})),n((()=>{var e;_.editor&&(null==(e=S())||e.remove(`#${_.id}`))})),r((()=>{var e;_.editor&&(null==(e=S())||e.remove(`#${_.id}`))})),(e,l)=>(d(),u(c,null,[i("div",{id:_.id,class:"tiny-textarea"},null,8,w),_.err?(d(),u("p",T,s(_.err),1)):m("",!0)],64))}});j.install=function(e){e.component("Vue3Tinymce",j)};const Q={components:{Plus:f,Vue3Tinymce:j},name:"siteConfiguration",data:()=>({Form:{},index:1,Types:"",state:{setting:{height:300,toolbar:"undo redo | fullscreen | blocks alignleft aligncenter alignright alignjustify | link unlink | numlist bullist | image media table | fontsize forecolor backcolor | bold italic underline strikethrough | indent outdent | superscript subscript | removeformat |",toolbar_mode:"sliding",quickbars_selection_toolbar:"removeformat | bold italic underline strikethrough | fontsize forecolor backcolor",plugins:"link image media table lists fullscreen quickbars",font_size_formats:"12px 14px 16px 18px",link_default_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,language:"zh-Hans",language_url:"./template/Default/assets/tinymce/langs/zh-Hans.js",custom_images_upload:!0,images_upload_url:"ajax.php?act=image_up",custom_images_upload_callback:e=>e.src}},StoreInform:{PopupNotice:"",notice_bottom:"",notice_check:"",notice_top:""}}),mounted(){this.getConfigureInform()},methods:{StoreInformGet(){let e=this;e.$ajax.post("ajax.php?act=StoreInform").then((function(l){l.code>=0?e.StoreInform=l.data:e.$message({message:l.msg,type:"error",grouping:!0})}))},ImageOpen(e){""!=e?g.alert('<img src="'+e+'" width="100%" />',"图片预览",{confirmButtonText:"OK",dangerouslyUseHTMLString:!0}):g.alert("请先填写图片地址","警告",{confirmButtonText:"好的",dangerouslyUseHTMLString:!0})},UploadedSuccessfully(e,l){0==e.code?(this.Form[this.Types]=e.src,this.$message({message:e.msg,type:"success",grouping:!0})):this.$message({message:e.msg,type:"error",grouping:!0})},beforeAvatarUpload:e=>!(e.size/1024/1024>2)||(alert("最多只可以上传2M的图片！"),!1),getConfigureInform(){let e=this;this.$ajax.post("ajax.php?act=StoreConf").then((function(l){if(l.code>=0){e.Form=l.data;let a=["CartState","ForcedLanding","DynamicMessage","GoodsRecommendation","SimilarRecommend","FluctuationsPrices","LevelDisplay"];for(const l of a)e.Form[l]-=0;e.StoreInformGet()}else g.alert(l.msg,"警告",{confirmButtonText:"好的",dangerouslyUseHTMLString:!0})}))},Router(e,l={}){this.$router.push({path:e,query:l})},saveInformation2(){let e=this;g.confirm("确认保存信息吗?","温馨提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{e.$ajax.post("ajax.php?act=configuration_save&type=notice",e.StoreInform).then((function(l){l.code>=0?(e.$message({message:l.msg,type:"success",grouping:!0}),e.StoreInformGet()):e.$message({message:l.msg,type:"error",grouping:!0})}))}))},saveInformation(){let e=this;g.confirm("确认保存信息吗?","温馨提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{e.$ajax.post("ajax.php?act=configuration_save&type=webset",e.Form).then((function(l){l.code>=0?(e.$message({message:l.msg,type:"success",grouping:!0}),e.getConfigureInform()):e.$message({message:l.msg,type:"error",grouping:!0})}))}))}}},L=e=>(y("data-v-7e2514ac"),e=e(),V(),e),P={style:{"background-color":"#FFFFFF",padding:"1em","margin-bottom":"0.5em"}},$=v("图片预览"),D=v("上传网站LOGO"),E=v("保存"),B=L((()=>i("span",{style:{color:"#18b566"}},"如果输入的是JS代码，需要输入script标签,否则JS代码无法运行，不懂请留空！",-1))),M=v("图片预览"),R=v("上传客服二维码图片"),H=v("图片预览"),z=v("上传客服二维码图片"),A=v("保存"),G=L((()=>i("div",{style:{color:"red"}},"开启后用户必须登陆才可以购买商品！ ",-1))),q=v("保存"),N=v("保存"),J=L((()=>i("div",{class:"editor"},null,-1)));e("default",p(Q,[["render",function(e,l,a,o,t,n){const r=b("el-page-header"),s=b("el-input"),m=b("el-form-item"),p=b("el-button"),f=b("el-upload"),g=b("n-tab-pane"),y=b("el-option"),V=b("el-select"),v=b("vue3-tinymce"),F=b("n-tabs"),S=b("el-form"),k=b("n-card");return d(),u(c,null,[i("div",P,[_(r,{onBack:l[0]||(l[0]=e=>n.Router("/user/shop")),content:"站点信息配置"})]),_(k,{title:"配置面板"},{default:h((()=>[_(S,{model:t.Form,"label-position":"top"},{default:h((()=>[_(F,{"default-value":t.index,type:"line"},{default:h((()=>[_(g,{name:1,tab:"基础配置"},{default:h((()=>[_(m,{label:"网站名称"},{default:h((()=>[_(s,{modelValue:t.Form.sitename,"onUpdate:modelValue":l[1]||(l[1]=e=>t.Form.sitename=e),placeholder:"网站的名称"},null,8,["modelValue"])])),_:1}),_(m,{label:"网站副标题"},{default:h((()=>[_(s,{modelValue:t.Form.title,"onUpdate:modelValue":l[2]||(l[2]=e=>t.Form.title=e),placeholder:"网站副标题"},null,8,["modelValue"])])),_:1}),_(m,{label:"站点关键词"},{default:h((()=>[_(s,{modelValue:t.Form.keywords,"onUpdate:modelValue":l[3]||(l[3]=e=>t.Form.keywords=e),placeholder:"网站关键词,SEO用"},null,8,["modelValue"])])),_:1}),_(m,{label:"网站描述"},{default:h((()=>[_(s,{modelValue:t.Form.description,"onUpdate:modelValue":l[4]||(l[4]=e=>t.Form.description=e),placeholder:"网站的描述,SEO用"},null,8,["modelValue"])])),_:1}),_(m,{label:"货币名称",placeholder:"站点货币名称"},{default:h((()=>[_(s,{modelValue:t.Form.currency,"onUpdate:modelValue":l[5]||(l[5]=e=>t.Form.currency=e)},null,8,["modelValue"])])),_:1}),_(m,{label:"APP下载地址"},{default:h((()=>[_(s,{modelValue:t.Form.appurl,"onUpdate:modelValue":l[6]||(l[6]=e=>t.Form.appurl=e),placeholder:"没有的话可以留空,可以在基础功能,我的APP里面生成"},null,8,["modelValue"])])),_:1}),_(m,{label:"网站底部备案号"},{default:h((()=>[_(s,{modelValue:t.Form.RecordNumber,"onUpdate:modelValue":l[7]||(l[7]=e=>t.Form.RecordNumber=e),placeholder:"网站底部备案号,留空隐藏"},null,8,["modelValue"])])),_:1}),_(m,{label:"用户后台小提示内容,使用符号「-」分隔"},{default:h((()=>[_(s,{modelValue:t.Form.UserBackgroundTips,"onUpdate:modelValue":l[8]||(l[8]=e=>t.Form.UserBackgroundTips=e),type:"textarea",placeholder:"用户后台小提示内容,使用符号「-」分隔"},null,8,["modelValue"])])),_:1}),_(m,{label:"网站LOGO地址"},{default:h((()=>[_(s,{modelValue:t.Form.logo,"onUpdate:modelValue":l[11]||(l[11]=e=>t.Form.logo=e),placeholder:"网站LOGO图片地址"},{prepend:h((()=>[_(p,{onClick:l[9]||(l[9]=e=>n.ImageOpen(t.Form.logo))},{default:h((()=>[$])),_:1})])),append:h((()=>[_(f,{action:"ajax.php?act=image_up","show-file-list":!1,"on-success":n.UploadedSuccessfully,"before-upload":n.beforeAvatarUpload},{default:h((()=>[_(p,{onClick:l[10]||(l[10]=e=>t.Types="logo")},{default:h((()=>[D])),_:1})])),_:1},8,["on-success","before-upload"])])),_:1},8,["modelValue"])])),_:1}),_(m,null,{default:h((()=>[_(p,{style:{width:"100%"},type:"primary",onClick:n.saveInformation},{default:h((()=>[E])),_:1},8,["onClick"])])),_:1})])),_:1}),_(g,{name:2,tab:"客服信息"},{default:h((()=>[_(m,{label:"客服QQ"},{default:h((()=>[_(s,{modelValue:t.Form.kfqq,"onUpdate:modelValue":l[12]||(l[12]=e=>t.Form.kfqq=e),placeholder:"平台客服QQ,用户可以过此QQ联系你"},null,8,["modelValue"])])),_:1}),_(m,{label:"客服微信,留空不显示"},{default:h((()=>[_(s,{modelValue:t.Form.kfwx,"onUpdate:modelValue":l[13]||(l[13]=e=>t.Form.kfwx=e),placeholder:"客服微信联系方式,留空不显示"},null,8,["modelValue"])])),_:1}),_(m,{label:"客服界面的提示信息[支持HTML代码]"},{default:h((()=>[_(s,{modelValue:t.Form.ServiceTips,"onUpdate:modelValue":l[14]||(l[14]=e=>t.Form.ServiceTips=e),type:"textarea",placeholder:"平台客服QQ,用户可以过此QQ联系你"},null,8,["modelValue"])])),_:1}),_(m,{label:"客服JS代码或IP统计代码,音乐播放器JS代码，都可以放到里面"},{default:h((()=>[_(s,{modelValue:t.Form.statistics,"onUpdate:modelValue":l[15]||(l[15]=e=>t.Form.statistics=e),type:"textarea",placeholder:"客服JS代码或IP统计代码,音乐播放器JS代码，都可以放到里面"},null,8,["modelValue"]),B])),_:1}),_(m,{label:"微信二维码，留空不显示"},{default:h((()=>[_(s,{modelValue:t.Form.ServiceImage,"onUpdate:modelValue":l[18]||(l[18]=e=>t.Form.ServiceImage=e),placeholder:"客服微信二维码"},{prepend:h((()=>[_(p,{onClick:l[16]||(l[16]=e=>n.ImageOpen(t.Form.ServiceImage))},{default:h((()=>[M])),_:1})])),append:h((()=>[_(f,{action:"ajax.php?act=image_up","show-file-list":!1,"on-success":n.UploadedSuccessfully,"before-upload":n.beforeAvatarUpload},{default:h((()=>[_(p,{onClick:l[17]||(l[17]=e=>t.Types="ServiceImage")},{default:h((()=>[R])),_:1})])),_:1},8,["on-success","before-upload"])])),_:1},8,["modelValue"])])),_:1}),_(m,{label:"QQ二维码，留空不显示"},{default:h((()=>[_(s,{modelValue:t.Form.ServiceImageQQ,"onUpdate:modelValue":l[21]||(l[21]=e=>t.Form.ServiceImageQQ=e),placeholder:"客服QQ二维码"},{prepend:h((()=>[_(p,{onClick:l[19]||(l[19]=e=>n.ImageOpen(t.Form.ServiceImageQQ))},{default:h((()=>[H])),_:1})])),append:h((()=>[_(f,{action:"ajax.php?act=image_up","show-file-list":!1,"on-success":n.UploadedSuccessfully,"before-upload":n.beforeAvatarUpload},{default:h((()=>[_(p,{onClick:l[20]||(l[20]=e=>t.Types="ServiceImageQQ")},{default:h((()=>[z])),_:1})])),_:1},8,["on-success","before-upload"])])),_:1},8,["modelValue"])])),_:1}),_(m,{label:"官方群链接"},{default:h((()=>[_(s,{modelValue:t.Form.Communication,"onUpdate:modelValue":l[22]||(l[22]=e=>t.Form.Communication=e),placeholder:"您的小店官方交流群地址"},null,8,["modelValue"])])),_:1}),_(m,null,{default:h((()=>[_(p,{style:{width:"100%"},type:"primary",onClick:n.saveInformation},{default:h((()=>[A])),_:1},8,["onClick"])])),_:1})])),_:1}),_(g,{name:3,tab:"功能配置"},{default:h((()=>[_(m,{label:"购物车开关"},{default:h((()=>[_(V,{modelValue:t.Form.CartState,"onUpdate:modelValue":l[23]||(l[23]=e=>t.Form.CartState=e),placeholder:"请选择状态",style:{width:"100%"}},{default:h((()=>[_(y,{label:"开启",value:1}),_(y,{label:"关闭",value:2})])),_:1},8,["modelValue"])])),_:1}),_(m,{label:"购买商品强制登陆开关"},{default:h((()=>[_(V,{modelValue:t.Form.ForcedLanding,"onUpdate:modelValue":l[24]||(l[24]=e=>t.Form.ForcedLanding=e),placeholder:"请选择状态",style:{width:"100%"}},{default:h((()=>[_(y,{label:"不开启用户强制登陆",value:1}),_(y,{label:"开启用户强制登陆(打开首页就跳转到登陆界面)",value:2}),_(y,{label:"开启用户强制登陆(只在下单的时候才提示需要登陆)",value:"3"})])),_:1},8,["modelValue"]),G])),_:1}),_(m,{label:"站点动态消息通知提醒开关,如用户xxx于xxx购买了商品"},{default:h((()=>[_(V,{modelValue:t.Form.DynamicMessage,"onUpdate:modelValue":l[25]||(l[25]=e=>t.Form.DynamicMessage=e),placeholder:"请选择状态",style:{width:"100%"}},{default:h((()=>[_(y,{label:"开启",value:1}),_(y,{label:"关闭",value:-1})])),_:1},8,["modelValue"])])),_:1}),_(m,{label:"商品推荐开关（仅在购物车,商品详情,订单详情等界面下方出现哦）"},{default:h((()=>[_(V,{modelValue:t.Form.GoodsRecommendation,"onUpdate:modelValue":l[26]||(l[26]=e=>t.Form.GoodsRecommendation=e),placeholder:"请选择状态",style:{width:"100%"}},{default:h((()=>[_(y,{label:"开启",value:1}),_(y,{label:"关闭",value:2})])),_:1},8,["modelValue"])])),_:1}),_(m,{label:"同分类商品推荐"},{default:h((()=>[_(V,{modelValue:t.Form.SimilarRecommend,"onUpdate:modelValue":l[27]||(l[27]=e=>t.Form.SimilarRecommend=e),placeholder:"请选择状态",style:{width:"100%"}},{default:h((()=>[_(y,{label:"开启",value:1}),_(y,{label:"关闭",value:-1})])),_:1},8,["modelValue"])])),_:1}),_(m,{label:"商品价格波动展示"},{default:h((()=>[_(V,{modelValue:t.Form.FluctuationsPrices,"onUpdate:modelValue":l[28]||(l[28]=e=>t.Form.FluctuationsPrices=e),placeholder:"请选择状态",style:{width:"100%"}},{default:h((()=>[_(y,{label:"开启",value:1}),_(y,{label:"关闭",value:-1})])),_:1},8,["modelValue"])])),_:1}),_(m,{label:"等级价格列表展示"},{default:h((()=>[_(V,{modelValue:t.Form.LevelDisplay,"onUpdate:modelValue":l[29]||(l[29]=e=>t.Form.LevelDisplay=e),placeholder:"请选择状态",style:{width:"100%"}},{default:h((()=>[_(y,{label:"开启",value:1}),_(y,{label:"关闭",value:-1})])),_:1},8,["modelValue"])])),_:1}),_(m,null,{default:h((()=>[_(p,{style:{width:"100%"},type:"primary",onClick:n.saveInformation},{default:h((()=>[q])),_:1},8,["onClick"])])),_:1})])),_:1}),_(g,{name:4,tab:"公告配置"},{default:h((()=>[_(m,{label:"首页弹窗通知"},{default:h((()=>[_(v,{modelValue:t.StoreInform.PopupNotice,"onUpdate:modelValue":l[30]||(l[30]=e=>t.StoreInform.PopupNotice=e),setting:t.state.setting},null,8,["modelValue","setting"])])),_:1}),_(m,{label:"首页顶部公告"},{default:h((()=>[_(v,{modelValue:t.StoreInform.notice_top,"onUpdate:modelValue":l[31]||(l[31]=e=>t.StoreInform.notice_top=e),setting:t.state.setting},null,8,["modelValue","setting"])])),_:1}),_(m,{label:"查单界面公告"},{default:h((()=>[_(v,{modelValue:t.StoreInform.notice_check,"onUpdate:modelValue":l[32]||(l[32]=e=>t.StoreInform.notice_check=e),setting:t.state.setting},null,8,["modelValue","setting"])])),_:1}),_(m,{label:"全局底部公告"},{default:h((()=>[_(v,{modelValue:t.StoreInform.notice_bottom,"onUpdate:modelValue":l[33]||(l[33]=e=>t.StoreInform.notice_bottom=e),setting:t.state.setting},null,8,["modelValue","setting"])])),_:1}),_(m,null,{default:h((()=>[_(p,{style:{width:"100%"},type:"primary",onClick:n.saveInformation2},{default:h((()=>[N])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["default-value"])])),_:1},8,["model"])])),_:1}),J],64)}],["__scopeId","data-v-7e2514ac"]]))}}}))}();
