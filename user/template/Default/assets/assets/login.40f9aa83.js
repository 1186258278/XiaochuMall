import{_ as U,C as q,E as P,r as l,h as S,c as d,d as n,w as s,o as a,f as i,e as g,t as R,i as j,a as u,b as y,k as z,l as D}from"./index.7e8edd7c.js";import{_ as V}from"./qq.4facf20a.js";import{a as N}from"./arrow-left-bold.3b628dc7.js";var T="./template/Default/assets/assets/phone.ef908b22.png";const A={components:{Conf:q,ArrowLeftBold:N},name:"login",data(){return{UserPanelInformation:this.$store.state.UserPanelInformation,Form:{username:"",password:"",code:""},loginChannel:{logo:"",title:"",phone:"",login:"",qqlogin:"",qqtype:!1},extremeParameter:!1,code_img:"ajax.php?act=VerificationCode&n=Login_vc",time:1,back:"",Load:!1}},mounted(){this.UserPanelInformation?this.Router("/user/home"):this.LoginChannel()},methods:{logToBackend(){let o={user:this.Form.username,pass:this.Form.password,vercode:this.Form.code},e=this;this.Load=!0,this.$ajax.post("ajax.php?act=login_account",o).then(function(c){e.Load=!1,c.code>=0?P.confirm(c.msg,"\u606D\u559C",{confirmButtonText:"\u597D\u7684",type:"success"}).then(()=>{e.LoginChannel()}):(e.$message({message:c.msg,type:"error",grouping:!0}),c.code==-2&&e.time++)})},Open(o,e=1){e==1?open(o):location.href=o},Router(o,e={}){this.$router.push({path:o,query:e})},QuickLogin(){open(this.loginChannel.qqlogin)},LoginChannel(){let o=this;this.$ajax.post("ajax.php?act=UserData").then(function(e){e.code==-3?(o.loginChannel=e.data,o.$store.commit("SetUserPanelInformation",!1)):e.code==1?(o.$store.commit("SetUserPanelInformation",e),o.UserPanelInformation=e,o.Router("/user")):(o.$store.commit("SetUserPanelInformation",!1),o.$message({message:e.msg,type:"error",grouping:!0}))})}}},f=o=>(z("data-v-735d809f"),o=o(),D(),o),E={class:"user_body"},O={style:{"text-align":"left",position:"absolute"}},Q={style:{"margin-top":"36px"}},M=["src"],G={style:{width:"350px",margin:"auto","text-align":"left"}},H=["src"],J=g(" \u7ACB\u5373\u767B\u5F55 "),K=g(" \u6CE8\u518C\u65B0\u8D26\u53F7 "),W=f(()=>i("span",{style:{color:"#cccccc",cursor:"not-allowed"},title:"\u672A\u5F00\u653E\u6CE8\u518C"},"\u6CE8\u518C\u65B0\u8D26\u53F7",-1)),X={style:{"text-align":"center"}},Y=f(()=>i("img",{src:V},null,-1)),Z=[Y],$=f(()=>i("img",{src:T,style:{width:"34px"}},null,-1)),ee=[$];function oe(o,e,c,te,t,m){const w=l("ArrowLeftBold"),x=l("el-icon"),C=l("n-h2"),_=l("n-input"),p=l("n-form-item"),h=l("el-col"),k=l("el-row"),L=l("n-form"),b=l("n-button"),v=l("n-gi"),B=l("n-grid"),F=l("n-card"),I=S("loading");return a(),d("div",E,[n(F,{bordered:!1,class:"user_card"},{default:s(()=>[i("div",O,[n(x,{onClick:e[0]||(e[0]=r=>m.Open("../",2)),color:"#000",style:{cursor:"pointer"},size:"38"},{default:s(()=>[n(w)]),_:1})]),i("div",Q,[i("img",{src:t.loginChannel.logo,style:{height:"56px"}},null,8,M)]),n(C,{style:{"font-weight":"500","margin-top":"2px","font-size":"20px"}},{default:s(()=>[g(R(t.loginChannel.title),1)]),_:1}),i("div",G,[n(L,{ref:"formRef",size:"large",model:t.Form,"show-label":!1},{default:s(()=>[n(p,null,{default:s(()=>[n(_,{class:"user_input",value:t.Form.username,"onUpdate:value":e[1]||(e[1]=r=>t.Form.username=r),placeholder:"\u8F93\u5165\u7528\u6237\u540D"},null,8,["value"])]),_:1}),n(p,null,{default:s(()=>[n(_,{class:"user_input",value:t.Form.password,"onUpdate:value":e[2]||(e[2]=r=>t.Form.password=r),type:"password","show-password-on":"mousedown",placeholder:"\u8F93\u5165\u767B\u5F55\u5BC6\u7801"},null,8,["value"])]),_:1}),n(p,null,{default:s(()=>[n(k,{gutter:1,style:{width:"100%"}},{default:s(()=>[n(h,{span:16},{default:s(()=>[n(_,{placeholder:"\u8F93\u5165\u9A8C\u8BC1\u7801",value:t.Form.code,"onUpdate:value":e[3]||(e[3]=r=>t.Form.code=r)},null,8,["value"])]),_:1}),n(h,{span:8},{default:s(()=>[i("img",{onClick:e[4]||(e[4]=r=>++t.time),class:"code_img",src:t.code_img+"&t="+t.time},null,8,H)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),j((a(),u(b,{onClick:m.logToBackend,color:"rgba(255, 184, 30, 1)",class:"user_btn",size:"large"},{default:s(()=>[J]),_:1},8,["onClick"])),[[I,t.Load]]),n(B,{style:{"text-align":"center","margin-top":"1.3em","font-size":"1.1em","margin-bottom":"1.2em"},cols:1},{default:s(()=>[t.loginChannel.login==1?(a(),u(v,{key:0,onClick:e[5]||(e[5]=r=>m.Router("register")),style:{cursor:"pointer"}},{default:s(()=>[K]),_:1})):(a(),u(v,{key:1},{default:s(()=>[W]),_:1}))]),_:1}),i("div",X,[t.loginChannel.qqtype?(a(),d("span",{key:0,style:{"margin-right":"1em",cursor:"pointer"},onClick:e[6]||(e[6]=r=>m.QuickLogin())},Z)):y("",!0),t.loginChannel.phone==1?(a(),d("span",{key:1,style:{cursor:"pointer"},onClick:e[7]||(e[7]=r=>m.Router("phoneLogin"))},ee)):y("",!0)])])]),_:1})])}var re=U(A,[["render",oe],["__scopeId","data-v-735d809f"]]);export{re as default};
