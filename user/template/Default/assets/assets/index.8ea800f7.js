import{_ as N,C as g,G as R,E as G,r as o,h as T,c as d,d as a,a as h,w as s,i as L,F as x,o as u,f as r,t as c,e as p,b as E,H as b,j as M,v as O}from"./index.7e8edd7c.js";var V="./template/Default/assets/assets/404.231d1009.png";const q={components:{Conf:g},name:"index",data(){return{activeIndex:this.$route.path,UserPanelInformation:this.$store.state.UserPanelInformation,contents:"",MenuList:{}}},mounted(){this.UserPanelInformation?(this.GetUserPanelInformation(),R(e=>{this.activeIndex=e.fullPath})):this.Router("/login")},methods:{TemDataGet(){let e=this;this.$ajax.post("ajax.php?act=TemData",{name:"Default"}).then(function(t){t.code>=1&&(console.log(e.UserPanelInformation),t.data.extend[0].value==2&&(e.contents=t.data.extend[1].value==""?"\u7528\u6237ID:"+e.UserPanelInformation.data.id:t.data.extend[1].value))})},NavigationName(e,t){switch(e-0){case 0:return"\u57FA\u7840\u529F\u80FD";case 1:return Object.keys(t).length===3?"\u6269\u5C55\u529F\u80FD":"\u66F4\u591A\u529F\u80FD";default:return"\u66F4\u591A\u529F\u80FD"}},Initialization(){for(const e in this.UserPanelInformation.list){this.MenuList[e]={};for(const t in this.UserPanelInformation.list[e]){let n=this.UserPanelInformation.list[e][t];if(n.path.includes("pages/user")){let _=n.path.split("/"),i=_[1]+"/"+_[2];n.path="/"+i}else n.path=="pages/index/article"?n.path="/user/notificationList":n.path=="pages/index/service"&&(n.path="/user/contactCustomerService");this.MenuList.length==3&&e==1?this.MenuList[e]["path_"+t]=n:this.MenuList[e][n.path]=n}}this.$store.state.ConfData||g.updateGlobalData(2),this.activeIndex==="/user"&&(this.activeIndex="/user/home",this.$router.push({path:this.activeIndex})),this.TemDataGet()},LogOut(){let e=this;G.confirm("\u786E\u8BA4\u9000\u51FA\u767B\u5F55\u5417\uFF1F","\u6E29\u99A8\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{e.$ajax.post("ajax.php?act=LogOut").then(function(t){t.code>=0?(e.$message({message:t.msg,type:"success",grouping:!0}),g.updateUserPanelInformation(),e.$store.commit("SetUserPanelInformation",!1),e.Router("/login")):e.$message({message:t.msg,type:"error",grouping:!0})})})},Router(e,t={}){this.$router.push({path:e,query:t})},GetUserPanelInformation(){let e=this,t=this.$store.state.UserPanelInformation;t&&(this.UserPanelInformation=t),this.$ajax.post("ajax.php?act=UserData").then(function(n){n.code>=1?(e.$store.commit("SetUserPanelInformation",n),e.UserPanelInformation=n,e.Initialization()):(e.$store.commit("SetUserPanelInformation",!1),e.Router("/login"))})},handleSelect(e){if(console.log(e),e=="/user/home"){this.activeIndex="/user/home";return}try{let t={};if(this.MenuList[0][e]?t=this.MenuList[0][e]:this.MenuList[1][e]?t=this.MenuList[1][e]:t=this.MenuList[2][e],t.type==4){this.LogOut();return}switch(t.type){case 1:this.Router(t.path);return;case 2:case 3:open(t.path);return}this.$message({message:"\u5F53\u524D\u8DEF\u7531\u65E0\u5339\u914D\u4FE1\u606F,\u65E0\u6CD5\u8DF3\u8F6C\uFF01",type:"error",grouping:!0})}catch{this.activeIndex="/user/home",this.$message({message:"\u5F53\u524D\u8DEF\u7531\u5730\u5740\u5F02\u5E38\uFF0C\u5DF2\u8FD4\u56DE\u540E\u53F0\u4E3B\u9875\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u8DEF\u5458\u5904\u7406\uFF01",type:"error",grouping:!0})}}}},H={class:"user_card",style:{"background-color":"#FFFFFF"}},K={style:{"text-align":"center",padding:"24px 0 24px"}},A={class:"nick"},J={class:"balance"},Q={style:{"margin-top":"5px"}},W=p("\u5145\u503C "),X=p("\u63D0\u73B0 "),Y=r("span",null,"\u7528\u6237\u4E2D\u5FC3",-1),Z={style:{color:"#6b6b6b"}},ee=r("img",{src:V},null,-1),te={class:"user_card"},ne={key:1,style:{width:"100%",height:"500px"}};function se(e,t,n,_,i,m){const $=o("n-watermark"),v=o("el-avatar"),y=o("n-ellipsis"),I=o("el-button"),U=o("el-menu-item"),D=o("el-tag"),F=o("el-menu-item-group"),S=o("el-sub-menu"),C=o("el-menu"),P=o("el-col"),k=o("router-view"),z=o("el-row"),B=T("loading");return u(),d(x,null,[a($,{content:i.contents,cross:"",fullscreen:"","font-size":16,"line-height":11,width:384,height:384,"x-offset":30,"y-offset":60,rotate:-15},null,8,["content"]),this.$store.state.UserPanelInformation?(u(),h(z,{key:0,gutter:16,style:{"margin-top":"1em"}},{default:s(()=>[a(P,{span:5},{default:s(()=>[r("div",H,[r("div",K,[a(v,{size:"large",style:{width:"72px",height:"72px"},src:i.UserPanelInformation.data.image},null,8,["src"]),r("div",A,c(i.UserPanelInformation.data.name||"\u7528\u6237\u540E\u53F0"),1),r("div",J,[a(y,{style:{"max-width":"90%"}},{default:s(()=>[p(" \u4F59\u989D\uFF1A"+c(e.$store.state.UserPanelInformation.data.money)+"\u5143 | "+c(e.$store.state.UserPanelInformation.conf.currency)+"\uFF1A"+c(e.$store.state.UserPanelInformation.data.currency),1)]),_:1})]),r("div",Q,[a(I,{class:"user_btn",onClick:t[0]||(t[0]=f=>m.Router("/user/pay")),type:"danger",size:"small"},{default:s(()=>[W]),_:1}),i.UserPanelInformation.data.withdrawSwitch?(u(),h(I,{key:0,onClick:t[1]||(t[1]=f=>m.Router("/user/withdrawalBalance")),class:"user_btn",type:"danger",size:"small"},{default:s(()=>[X]),_:1})):E("",!0)])]),r("div",null,[a(C,{"default-active":i.activeIndex,onSelect:m.handleSelect,"active-text-color":"#ff614a",router:"","unique-opened":!0},{default:s(()=>[a(U,{index:"/user/home",class:b(i.activeIndex=="/user/home"?" user_munu_active":"")},{default:s(()=>[Y]),_:1},8,["class"]),(u(!0),d(x,null,M(i.MenuList,(f,w)=>(u(),h(S,{index:w+"_menu"},{title:s(()=>[r("span",Z,c(m.NavigationName(w,i.MenuList)),1)]),default:s(()=>[a(F,null,{default:s(()=>[(u(!0),d(x,null,M(f,(l,j)=>(u(),h(U,{index:j,class:b(["user_munu",i.activeIndex===l.path?" user_munu_active":""]),style:{"padding-left":"24px","padding-right":"10px"}},{default:s(()=>[a(v,{src:l.icon,size:"small",style:{"background-color":"#FFF","margin-right":"5px"}},{default:s(()=>[ee]),_:2},1032,["src"]),a(y,{style:{width:"120px"}},{default:s(()=>[r("span",null,c(l.name),1)]),_:2},1024),L(a(D,{type:l.data.type=="error"?"danger":l.data.type=="primary"?"":l.data.type,effect:"light",size:"small",style:{"margin-left":"10px"}},{default:s(()=>[p(c(l.data.text),1)]),_:2},1032,["type"]),[[O,l.data.state]])]),_:2},1032,["index","class"]))),256))]),_:2},1024)]),_:2},1032,["index"]))),256))]),_:1},8,["default-active","onSelect"])])])]),_:1}),a(P,{span:19},{default:s(()=>[r("div",te,[a(k)])]),_:1})]),_:1})):L((u(),d("div",ne,null,512)),[[B,!0]])],64)}var oe=N(q,[["render",se]]);export{oe as default};
