System.register(["./index-legacy.6abde332.js"],(function(e){"use strict";var t,o,a,n,r,s,l,i,u,m,c,d,g;return{setters:[function(e){t=e._,o=e.E,a=e.m,n=e.r,r=e.c,s=e.f,l=e.d,i=e.w,u=e.F,m=e.o,c=e.e,d=e.t,g=e.a}],execute:function(){const p={name:"CommodityManagement",data:()=>({GoodsList:[],Count:0,page:1,limit:6,name:""}),watch:{name(){this.getConfigureInform(1)}},mounted(){this.getConfigureInform(1)},methods:{commonPriceAdjust(e,t=0){let n=this;o.prompt("请输入商品涨幅百分比，输入1相当于涨价1%！","商品涨幅配置",{confirmButtonText:"确认修改",cancelButtonText:"取消",inputValue:t,inputPattern:/^[0-9]*$/,inputErrorMessage:"请填写正确的内容,只能够输入0-1000范围的数字"}).then((t=>{let o=t.value-0;o<0||o>1e3?a({type:"info",message:"价格涨幅比例不能低于0%，或高于1000%！"}):n.$ajax.post("ajax.php?act=AlterPrice",{gid:e,rise:o,name:n.name}).then((function(e){e.code>=0?(n.$message({message:e.msg,type:"success",grouping:!0}),n.getConfigureInform(n.page)):n.$message({message:e.msg,type:"error",grouping:!0})}))}))},commonStatusAdjust(e,t=1){let a=this;o.confirm("确认将"+(-1==e?"这些":"此")+"商品设置为"+(1==t?"上架":"下架")+"状态吗？","温馨提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{a.$ajax.post("ajax.php?act=GoodsState",{gid:e,state:t,name:a.name}).then((function(e){e.code>=0?(a.$message({message:e.msg,type:"success",grouping:!0}),a.getConfigureInform(a.page)):a.$message({message:e.msg,type:"error",grouping:!0})}))}))},Router(e,t={}){this.$router.push({path:e,query:t})},fomatFloat(e,t){var o=parseFloat(e);if(isNaN(o))return!1;var a=(o=Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toString(),n=a.indexOf(".");for(n<0&&(n=a.length,a+=".");a.length<=n+t;)a+="0";return a},getConfigureInform(e=1){this.page=e;let t=this;this.$ajax.post("ajax.php?act=GoodsList",{page:e,limit:this.limit,name:this.name}).then((function(e){e.code>=0?(t.GoodsList=e.data,t.Count=e.count):o.alert(e.msg,"警告",{confirmButtonText:"好的",dangerouslyUseHTMLString:!0})}))}}},f={style:{"background-color":"#FFFFFF",padding:"1em","margin-bottom":"0.5em"}},y={style:{"margin-bottom":"1em"}},h=c("筛选商品"),w=c("一键上架"),_=c("一键下架"),k=c("一键调价"),C=["src"],b=c("上架中 "),j=c("已下架 "),x=c("未调价 "),F={style:{color:"#0791e7"}},A={key:0,style:{color:"#999"}},S={key:1,style:{color:"rgba(255,0,0,0.75)"}},$=c("有货"),v=c("缺货"),B=c(" 涨价后的效果您仅可在未登录的情况下，访问自己的店铺域名查看哦 "),I=c(" 价格涨幅百分比只可填写数字，填1就相当于将此商品涨价百分之1，以此类推！ "),M=c(" 若您在登陆状态下访问您的店铺域名，商品售价还是会显示为您的成本价，如果其他已登陆用户的用户等级和你一样，甚至比你高，也是不会有加价效果的！ ");e("default",t(p,[["render",function(e,t,o,a,p,P){const T=n("el-page-header"),z=n("el-input"),G=n("el-button"),L=n("n-card"),V=n("el-table-column"),q=n("el-tag"),E=n("el-table"),N=n("el-pagination"),R=n("n-alert");return m(),r(u,null,[s("div",f,[l(T,{onBack:t[0]||(t[0]=e=>P.Router("/user/shop")),content:"商品配置"})]),l(L,{title:"批量操作",style:{"margin-bottom":"0.5em"}},{default:i((()=>[s("div",y,[l(z,{modelValue:p.name,"onUpdate:modelValue":t[1]||(t[1]=e=>p.name=e),placeholder:"请输入商品名称来筛选商品！"},{prepend:i((()=>[h])),_:1},8,["modelValue"])]),l(G,{plain:"",type:"success",onClick:t[2]||(t[2]=e=>P.commonStatusAdjust(-1,1))},{default:i((()=>[w])),_:1}),l(G,{plain:"",type:"danger",onClick:t[3]||(t[3]=e=>P.commonStatusAdjust(-1,-1))},{default:i((()=>[_])),_:1}),l(G,{type:"primary",plain:"",onClick:t[4]||(t[4]=e=>P.commonPriceAdjust(-1,0))},{default:i((()=>[k])),_:1})])),_:1}),l(L,{title:"商品管理",style:{"margin-bottom":"0.5em"}},{default:i((()=>[l(E,{data:p.GoodsList,size:"",stripe:"",style:{width:"100%"}},{default:i((()=>[l(V,{label:"商品名"},{default:i((e=>[c(" ["+d(e.row.gid)+"] "+d(e.row.name),1)])),_:1}),l(V,{label:"商品图"},{default:i((e=>[s("img",{style:{width:"36px",height:"36px"},src:e.row.image},null,8,C)])),_:1}),l(V,{label:"状态"},{default:i((e=>[1==e.row.state?(m(),g(q,{key:0,effect:"dark",onClick:t=>P.commonStatusAdjust(e.row.gid,-1),style:{cursor:"pointer"},type:"success"},{default:i((()=>[b])),_:2},1032,["onClick"])):(m(),g(q,{key:1,effect:"dark",onClick:t=>P.commonStatusAdjust(e.row.gid,1),style:{cursor:"pointer"},type:"danger"},{default:i((()=>[j])),_:2},1032,["onClick"]))])),_:1}),l(V,{label:"调价"},{default:i((e=>[0==e.row.rise?(m(),g(q,{key:0,effect:"dark",style:{cursor:"pointer"},onClick:t=>P.commonPriceAdjust(e.row.gid,e.row.rise)},{default:i((()=>[x])),_:2},1032,["onClick"])):(m(),g(q,{key:1,effect:"dark",style:{cursor:"pointer"},onClick:t=>P.commonPriceAdjust(e.row.gid,e.row.rise),type:"warning"},{default:i((()=>[c("涨"+d(e.row.rise)+"% ",1)])),_:2},1032,["onClick"]))])),_:1}),l(V,{label:"成本"},{default:i((e=>[s("span",F,d(P.fomatFloat(e.row.price,2))+"元",1)])),_:1}),l(V,{label:"售价"},{default:i((e=>[0==e.row.rise?(m(),r("span",A,"原价")):(m(),r("span",S,d(P.fomatFloat(e.row.price+e.row.price*(e.row.rise/100),2))+"元",1))])),_:1}),l(V,{label:"每份发货"},{default:i((e=>[s("span",null,d(e.row.quantity)+d(e.row.units),1)])),_:1}),l(V,{label:"销量"},{default:i((e=>[s("span",null,d(e.row.sales>1e4?e.row.sales>1e5?"10万+":"1万+":e.row.sales)+"份",1)])),_:1}),l(V,{label:"库存"},{default:i((e=>[e.row.quota>=1?(m(),g(q,{key:0,type:"success"},{default:i((()=>[$])),_:1})):(m(),g(q,{key:1,type:"danger"},{default:i((()=>[v])),_:1}))])),_:1})])),_:1},8,["data"]),l(N,{style:{"margin-top":"1em"},background:"","hide-on-single-page":"",small:"",layout:"total, prev, pager, next, jumper",onCurrentChange:P.getConfigureInform,"page-size":p.limit,"default-page-size":p.limit,total:p.Count},null,8,["onCurrentChange","page-size","default-page-size","total"])])),_:1}),l(L,{title:"注意事项"},{default:i((()=>[l(R,{"show-icon":!1,style:{"margin-bottom":"0.5em"}},{default:i((()=>[B])),_:1}),l(R,{"show-icon":!1,style:{"margin-bottom":"0.5em"}},{default:i((()=>[I])),_:1}),l(R,{"show-icon":!1,style:{"margin-bottom":"0.5em"}},{default:i((()=>[M])),_:1})])),_:1})],64)}]]))}}}));
